var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(a){var c=0;return function(){return c<a.length?{done:!1,value:a[c++]}:{done:!0}}};$jscomp.arrayIterator=function(a){return{next:$jscomp.arrayIteratorImpl(a)}};$jscomp.makeIterator=function(a){var c="undefined"!=typeof Symbol&&Symbol.iterator&&a[Symbol.iterator];return c?c.call(a):$jscomp.arrayIterator(a)};$jscomp.arrayFromIterator=function(a){for(var c,d=[];!(c=a.next()).done;)d.push(c.value);return d};
$jscomp.arrayFromIterable=function(a){return a instanceof Array?a:$jscomp.arrayFromIterator($jscomp.makeIterator(a))};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(a){var c=function(){};c.prototype=a;return new c};$jscomp.underscoreProtoCanBeSet=function(){var a={a:!0},c={};try{return c.__proto__=a,c.a}catch(d){}return!1};
$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(a,c){a.__proto__=c;if(a.__proto__!==c)throw new TypeError(a+" is not extensible");return a}:null;
$jscomp.inherits=function(a,c){a.prototype=$jscomp.objectCreate(c.prototype);a.prototype.constructor=a;if($jscomp.setPrototypeOf){var d=$jscomp.setPrototypeOf;d(a,c)}else for(d in c)if("prototype"!=d)if(Object.defineProperties){var b=Object.getOwnPropertyDescriptor(c,d);b&&Object.defineProperty(a,d,b)}else a[d]=c[d];a.superClass_=c.prototype};$jscomp.getGlobal=function(a){return"undefined"!=typeof window&&window===a?a:"undefined"!=typeof global&&null!=global?global:a};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(a,c,d){a!=Array.prototype&&a!=Object.prototype&&(a[c]=d.value)};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var a=0;return function(c){return $jscomp.SYMBOL_PREFIX+(c||"")+a++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.iterator;a||(a=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[a]&&$jscomp.defineProperty(Array.prototype,a,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var a=$jscomp.global.Symbol.asyncIterator;a||(a=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(a){$jscomp.initSymbolIterator();a={next:a};a[$jscomp.global.Symbol.iterator]=function(){return this};return a};$jscomp.generator={};
$jscomp.generator.ensureIteratorResultIsObject_=function(a){if(!(a instanceof Object))throw new TypeError("Iterator result "+a+" is not an object");};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};
$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(a){this.yieldResult=a};
$jscomp.generator.Context.prototype.throw_=function(a){this.abruptCompletion_={exception:a,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(a){this.abruptCompletion_={return:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(a){this.abruptCompletion_={jumpTo:a};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(a,c){this.nextAddress=c;return{value:a}};
$jscomp.generator.Context.prototype.yieldAll=function(a,c){a=$jscomp.makeIterator(a);var d=a.next();$jscomp.generator.ensureIteratorResultIsObject_(d);if(d.done)this.yieldResult=d.value,this.nextAddress=c;else return this.yieldAllIterator_=a,this.yield(d.value,c)};$jscomp.generator.Context.prototype.jumpTo=function(a){this.nextAddress=a};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};
$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(a,c){this.catchAddress_=a;void 0!=c&&(this.finallyAddress_=c)};$jscomp.generator.Context.prototype.setFinallyBlock=function(a){this.catchAddress_=0;this.finallyAddress_=a||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(a,c){this.nextAddress=a;this.catchAddress_=c||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(a){this.catchAddress_=a||0;a=this.abruptCompletion_.exception;this.abruptCompletion_=null;return a};$jscomp.generator.Context.prototype.enterFinallyBlock=function(a,c,d){d?this.finallyContexts_[d]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=a||0;this.finallyAddress_=c||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(a,c){c=this.finallyContexts_.splice(c||0)[0];if(c=this.abruptCompletion_=this.abruptCompletion_||c){if(c.isException)return this.jumpToErrorHandler_();void 0!=c.jumpTo&&this.finallyAddress_<c.jumpTo?(this.nextAddress=c.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=a};$jscomp.generator.Context.prototype.forIn=function(a){return new $jscomp.generator.Context.PropertyIterator(a)};
$jscomp.generator.Context.PropertyIterator=function(a){this.object_=a;this.properties_=[];for(var c in a)this.properties_.push(c);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var a=this.properties_.pop();if(a in this.object_)return a}return null};$jscomp.generator.Engine_=function(a){this.context_=new $jscomp.generator.Context;this.program_=a};
$jscomp.generator.Engine_.prototype.next_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,a,this.context_.next_);this.context_.next_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(a){this.context_.start_();var c=this.context_.yieldAllIterator_;if(c)return this.yieldAllStep_("return"in c?c["return"]:function(d){return{value:d,done:!0}},a,this.context_.return);this.context_.return(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(a){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],a,this.context_.next_);this.context_.throw_(a);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(a,c,d){try{var b=a.call(this.context_.yieldAllIterator_,c);$jscomp.generator.ensureIteratorResultIsObject_(b);if(!b.done)return this.context_.stop_(),b;var e=b.value}catch(g){return this.context_.yieldAllIterator_=null,this.context_.throw_(g),this.nextStep_()}this.context_.yieldAllIterator_=null;d.call(this.context_,e);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var a=this.program_(this.context_);if(a)return this.context_.stop_(),{value:a.value,done:!1}}catch(c){this.context_.yieldResult=void 0,this.context_.throw_(c)}this.context_.stop_();if(this.context_.abruptCompletion_){a=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(a.isException)throw a.exception;return{value:a.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(a){this.next=function(c){return a.next_(c)};this.throw=function(c){return a.throw_(c)};this.return=function(c){return a.return_(c)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(a,c){c=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(c));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(c,a.prototype);return c};
$jscomp.polyfill=function(a,c,d,b){if(c){d=$jscomp.global;a=a.split(".");for(b=0;b<a.length-1;b++){var e=a[b];e in d||(d[e]={});d=d[e]}a=a[a.length-1];b=d[a];c=c(b);c!=b&&null!=c&&$jscomp.defineProperty(d,a,{configurable:!0,writable:!0,value:c})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(a){function c(){this.batch_=null}function d(b){return b instanceof e?b:new e(function(d,a){d(b)})}if(a&&!$jscomp.FORCE_POLYFILL_PROMISE)return a;c.prototype.asyncExecute=function(b){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(b);return this};c.prototype.asyncExecuteBatch_=function(){var b=this;this.asyncExecuteFunction(function(){b.executeBatch_()})};var b=$jscomp.global.setTimeout;c.prototype.asyncExecuteFunction=function(d){b(d,
0)};c.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var b=this.batch_;this.batch_=[];for(var d=0;d<b.length;++d){var a=b[d];b[d]=null;try{a()}catch(k){this.asyncThrow_(k)}}}this.batch_=null};c.prototype.asyncThrow_=function(b){this.asyncExecuteFunction(function(){throw b;})};var e=function(b){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var d=this.createResolveAndReject_();try{b(d.resolve,d.reject)}catch(l){d.reject(l)}};e.prototype.createResolveAndReject_=
function(){function b(b){return function(e){a||(a=!0,b.call(d,e))}}var d=this,a=!1;return{resolve:b(this.resolveTo_),reject:b(this.reject_)}};e.prototype.resolveTo_=function(b){if(b===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(b instanceof e)this.settleSameAsPromise_(b);else{a:switch(typeof b){case "object":var d=null!=b;break a;case "function":d=!0;break a;default:d=!1}d?this.resolveToNonPromiseObj_(b):this.fulfill_(b)}};e.prototype.resolveToNonPromiseObj_=function(b){var d=
void 0;try{d=b.then}catch(l){this.reject_(l);return}"function"==typeof d?this.settleSameAsThenable_(d,b):this.fulfill_(b)};e.prototype.reject_=function(b){this.settle_(2,b)};e.prototype.fulfill_=function(b){this.settle_(1,b)};e.prototype.settle_=function(b,d){if(0!=this.state_)throw Error("Cannot settle("+b+", "+d+"): Promise already settled in state"+this.state_);this.state_=b;this.result_=d;this.executeOnSettledCallbacks_()};e.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var b=
0;b<this.onSettledCallbacks_.length;++b)g.asyncExecute(this.onSettledCallbacks_[b]);this.onSettledCallbacks_=null}};var g=new c;e.prototype.settleSameAsPromise_=function(b){var d=this.createResolveAndReject_();b.callWhenSettled_(d.resolve,d.reject)};e.prototype.settleSameAsThenable_=function(b,d){var a=this.createResolveAndReject_();try{b.call(d,a.resolve,a.reject)}catch(k){a.reject(k)}};e.prototype.then=function(b,d){function a(b,d){return"function"==typeof b?function(d){try{c(b(d))}catch(q){g(q)}}:
d}var c,g,f=new e(function(b,d){c=b;g=d});this.callWhenSettled_(a(b,c),a(d,g));return f};e.prototype.catch=function(b){return this.then(void 0,b)};e.prototype.callWhenSettled_=function(b,d){function a(){switch(e.state_){case 1:b(e.result_);break;case 2:d(e.result_);break;default:throw Error("Unexpected state: "+e.state_);}}var e=this;null==this.onSettledCallbacks_?g.asyncExecute(a):this.onSettledCallbacks_.push(a)};e.resolve=d;e.reject=function(b){return new e(function(d,a){a(b)})};e.race=function(b){return new e(function(a,
e){for(var c=$jscomp.makeIterator(b),g=c.next();!g.done;g=c.next())d(g.value).callWhenSettled_(a,e)})};e.all=function(b){var a=$jscomp.makeIterator(b),c=a.next();return c.done?d([]):new e(function(b,e){function g(d){return function(a){f[d]=a;h--;0==h&&b(f)}}var f=[],h=0;do f.push(void 0),h++,d(c.value).callWhenSettled_(g(f.length-1),e),c=a.next();while(!c.done)})};return e},"es6","es3");
$jscomp.checkStringArgs=function(a,c,d){if(null==a)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(c instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return a+""};
$jscomp.polyfill("String.prototype.repeat",function(a){return a?a:function(a){var d=$jscomp.checkStringArgs(this,null,"repeat");if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var b="";a;)if(a&1&&(b+=d),a>>>=1)d+=d;return b}},"es6","es3");
$jscomp.polyfill("String.prototype.startsWith",function(a){return a?a:function(a,d){var b=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var e=b.length,c=a.length;d=Math.max(0,Math.min(d|0,b.length));for(var f=0;f<c&&d<e;)if(b[d++]!=a[f++])return!1;return f>=c}},"es6","es3");
$jscomp.iteratorFromArray=function(a,c){$jscomp.initSymbolIterator();a instanceof String&&(a+="");var d=0,b={next:function(){if(d<a.length){var e=d++;return{value:c(e,a[e]),done:!1}}b.next=function(){return{done:!0,value:void 0}};return b.next()}};b[Symbol.iterator]=function(){return b};return b};$jscomp.polyfill("Array.prototype.keys",function(a){return a?a:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
var __awaiter=this&&this.__awaiter||function(a,c,d,b){return new (d||(d=Promise))(function(e,g){function f(d){try{l(b.next(d))}catch(m){g(m)}}function h(d){try{l(b["throw"](d))}catch(m){g(m)}}function l(b){b.done?e(b.value):(new d(function(d){d(b.value)})).then(f,h)}l((b=b.apply(a,c||[])).next())})},apps;
(function(a){function c(){return __awaiter(this,void 0,void 0,function e(){return $jscomp.generator.createGenerator(e,function(d){desktop.showToastMessage("Please run from webview2 application!","Web app error","warning");d.jumpToEnd()})})}try{var d=window.chrome.webview.hostObjects.gcmodeller}catch(b){d={getUniprotXmlDatabase:c,scanDatabase:c,openEnrichmentPage:c,sendPost:c}}a.gcmodeller=d;a.run=function(){Router.AddAppHandler(new pages.applets);Router.AddAppHandler(new pages.settings);Router.AddAppHandler(new pages.data_repository);
Router.AddAppHandler(new pages.analysis_project.create_project);Router.AddAppHandler(new pages.analysis_project.edit_sampleinfo);Router.AddAppHandler(new pages.repository.enrichment_database);Router.AddAppHandler(new pages.enrichment_analysis);Router.AddAppHandler(new pages.cmeans_patterns);Router.AddAppHandler(new pages.zscore_analysis);Router.AddAppHandler(new pages.dataEmbedding);Router.AddAppHandler(new pages.runPLAS);Router.RunApp()}})(apps||(apps={}));$ts.mode=Modes.debug;$ts(apps.run);var desktop;
(function(a){(function(a){a.RSharpErrorMessage=function(d){var b="R# Error:",a=1;if("string"==typeof d.Message)b=b+"&nbsp;"+d.Message.replace(/[<]/ig,"&lt;");else{b+="<br/><br/>";for(var c=$jscomp.makeIterator(d.Message),f=c.next();!f.done;f=c.next())f=f.value,b+="&nbsp;&nbsp;"+a++ +"."+f.replace(/[<]/ig,"&lt;")+"<br/>"}b=b+"<br/>"+("&nbsp;&nbsp;&nbsp;"+d.Source.replace(/[<]/ig,"&lt;")+"<br/>");b+="&nbsp;&nbsp;&nbsp;"+"~".repeat(d.Source.length)+"<br/>";b+="<br/>";d=$jscomp.makeIterator(d.StackTrace);
for(a=d.next();!a.done;a=d.next())c=a.value,a=c.Method.Namespace+"."+c.Method.Module+"."+c.Method.Method,a=a+" at "+c.File+" line "+c.Line,b+=a.replace(/[<]/ig,"&lt;")+"<br />";return b};a.isRSharpError=function(d){var b=TypeScript.Reflection.$typeof(d);return $ts(["Message","Source","TypeFullName","StackTrace"]).All(function(d){return-1<b.property.indexOf(d)})}})(a.RSharp||(a.RSharp={}))})(desktop||(desktop={}));
(function(a){a.promiseAsyncCallback=function(c,d){return __awaiter(this,void 0,void 0,function e(){return $jscomp.generator.createGenerator(e,function(e){a.parseMessage(c).then(function(e){a.parseResultFlag(c,e).then(function(a){d(a,e)})});e.jumpToEnd()})})};a.loading=function(a){a=void 0===a?"Loading...":a;$ts("#spinner-message").display(a);$ts("#busy-indicator").show()};a.closeSpinner=function(){$ts("#busy-indicator").hide()}})(desktop||(desktop={}));
(function(a){a.now=function(){return(new Date).toLocaleTimeString()};a.parseResultFlag=function(a,d){return __awaiter(this,void 0,void 0,function e(){var c,f;return $jscomp.generator.createGenerator(e,function(e){if(1==e.nextAddress)return e.yield(a.result,2);f=(c=e.yieldResult)&&0==d.code;return e.return(f)})})};a.parseMessage=function(a){return __awaiter(this,void 0,void 0,function b(){var e,c;return $jscomp.generator.createGenerator(b,function(b){if(1==b.nextAddress)return b.yield(a.data,2);e=
b.yieldResult;if($ts.csv.isTsvFile(e))c={code:0,info:e};else if(e.startsWith("data:"))c={code:0,info:e};else try{c=JSON.parse(e)}catch(h){c={code:500,info:e}}return b.return(c)})})};a.processHtmlMsg=function(c){"string"==typeof c?(c=c.replace(/[<]/ig,"&lt;"),c=Strings.lineTokens(c).join("<br />")):c=a.RSharp.isRSharpError(c)?a.RSharp.RSharpErrorMessage(c):"Unhandle error!";return c}})(desktop||(desktop={}));
(function(a){function c(b,e,c,f,h){e=void 0===e?"Task Error":e;c=void 0===c?"":c;f=void 0===f?"danger":f;return $ts("<div>",{class:["toast","show","fade","toast-"+f],role:"alert","aria-live":"assertive","aria-atomic":"true","data-mdb-color":f,"data-mdb-autohide":(void 0===h?!0:h).toString(),style:"width: 500px;"}).display('        \n            <div class="toast-header toast-'+f+'">\n                <i class="'+d[f]+'"></i>\n                <strong class="me-auto">'+e+"</strong>\n                <small>"+
(c&&"null"!=c.toLowerCase()?c:"")+'</small>\n                <button type="button" class="btn-close" data-mdb-dismiss="toast" aria-label="Close">\n                </button>\n            </div>\n            <div class="toast-body">'+a.processHtmlMsg(b)+"</div>\n        ")}a.showToastMessage=function(b,d,g,f){d=void 0===d?"Task Error":d;g=void 0===g?"info":g;f=void 0===f?!0:f;$ts("#busy-indicator").hide();$ts("#toast-message").appendElement(c(b,d,a.now(),g,f))};var d={success:"fas fa-check fa-lg me-2",
danger:"fas fa-exclamation-circle fa-lg me-2",warning:"fas fa-exclamation-triangle fa-lg me-2",info:"fas fa-info-circle fa-lg me-2"}})(desktop||(desktop={}));(function(a){a=a.languages||(a.languages={});a[a.System=0]="System";a[a["zh-CN"]=1]="zh-CN";a[a["en-US"]=2]="en-US";a[a["fr-FR"]=3]="fr-FR"})(desktop||(desktop={}));var js_plot;
(function(a){var c=function(d){this.option={};this.myChart=echarts.init(document.getElementById(void 0===d?"Rplot_js":d),null,{renderer:"canvas",useDirtyRect:!1});this.option&&this.myChart.setOption(this.option)};c.prototype.plot=function(d,b){this.option={grid3D:{},xAxis3D:{},yAxis3D:{},zAxis3D:{},dataset:{dimensions:["","dim1","dim2","dim3"],source:d},series:[{type:"scatter3D",symbolSize:void 0===b?30:b,encode:{x:"dim1",y:"dim2",z:"dim3",tooltip:[0,1,2,3]}}]};this.myChart.setOption(this.option);
window.addEventListener("resize",this.myChart.resize)};a.scatter3d=c})(js_plot||(js_plot={}));var pages;(function(a){var c=function(d){return Bootstrap.apply(this,arguments)||this};$jscomp.inherits(c,Bootstrap);c.prototype.generateSsid=function(d){d=void 0===d?{}:d;d=JSON.stringify(d);d=desktop.now()+"-"+d+"-"+this.appName;return md5(d)};a.analysis_session=c})(pages||(pages={}));
(function(a){function c(b,d){var c=[];c.push(new a.suggestion_list.term(d,b.title));c.push(new a.suggestion_list.term(d,b.appLink));c.push(new a.suggestion_list.term(d,b.desc));return c}a.toSearchTerm=c;var d=function(){var b=Bootstrap.apply(this,arguments)||this;b.appList=[{appLink:"apps.gcmodeller.openZscore",title:"Z-score analysis",desc:"Z-score analysis",icon:d.defaultIcon},{appLink:"apps.gcmodeller.openDataEmbedding",title:"Data Embedding",desc:"PCA/UMAP/t-SNE data embedding",icon:d.defaultIcon},
{appLink:"apps.gcmodeller.openCMeans",title:"Fuzzy CMeans",desc:"Fuzzy cmeans clustering",icon:d.defaultIcon},{appLink:"apps.gcmodeller.openPLAS",title:"PLAS",desc:"bio-chemical system simulator",icon:d.defaultIcon}];b.terms=[];return b};$jscomp.inherits(d,Bootstrap);d.prototype.init=function(){a.background.run();d.showAppList(this.appList);for(var b=0;b<this.appList.length;b++)for(var e=$jscomp.makeIterator(c(this.appList[b],b)),g=e.next();!g.done;g=e.next())this.terms.push(g.value);this.suggestions=
new a.suggestion_list.suggestion(this.terms);this.hookSearchBar()};d.prototype.hookSearchBar=function(){var b=$ts("#applets"),a=this,c=$ts("#form1");c.onchange=function(){if(c.value&&""!=c.value){var e=c.value;b.clear();e=$jscomp.makeIterator(a.suggestions.populateSuggestion(e,6,!1));for(var g=e.next();!g.done;g=e.next())g=d.buildElement(a.appList[g.value.id]),b.appendChild(g)}else d.showAppList(a.appList)}};d.showAppList=function(b){var d=$ts("#applets").clear();b=$jscomp.makeIterator(b);for(var c=
b.next();!c.done;c=b.next())d.appendChild(a.applets.buildElement(c.value))};d.buildElement=function(b){return $ts("<div>",{class:["col-xl-4","col-lg-6","mb-4"]}).display('     \n<a href="#" onclick="'+b.appLink+'();" class="card ripple bg-image hover-zoom">\n    <div class="card-body">\n        <div class="d-flex align-items-center">\n            <img src="'+b.icon+'" alt="" class="img-fluid rounded icon-image" />\n            <div class="ms-3">\n                <p class="fw-bold mb-1">'+b.title+
'</p>\n                <p class="text-muted mb-0">'+b.desc+"</p>\n            </div>\n        </div>\n    </div>\n</a>\n")};$jscomp.global.Object.defineProperties(d.prototype,{appName:{configurable:!0,enumerable:!0,get:function(){return"applets"}}});d.defaultIcon="/assets/images/background.jpg";a.applets=d})(pages||(pages={}));
(function(a){var c=function(d){return Bootstrap.apply(this,arguments)||this};$jscomp.inherits(c,Bootstrap);c.prototype.init=function(){};$jscomp.global.Object.defineProperties(c.prototype,{appName:{configurable:!0,enumerable:!0,get:function(){return"data_repository"}}});a.data_repository=c})(pages||(pages={}));var omicsAnalysis;
(function(a){a.expressionMatrix="Microsoft Excel(*.csv)|*.csv|GCModeller HTS Matrix(*.HTS)|*.HTS";a.parseSampleInfo=function(a,d,b){b=void 0===b?null:b;$ts.get(sampleInfoUrl+a,function(a){0!=a.code?isNullOrUndefined(b)?desktop.showToastMessage(a.info,"Parse SampleInfo","danger"):b(a.info):(a=$ts.csv.toObjects(a.info).ToArray(!1),TypeScript.logging.table(a),d(a))})};a.saveSampleInfo=function(a,d,b){var c={csv:$ts.csv.toText(a)};d="@api:save?file="+d+"&category=sampleInfo";TypeScript.logging.table(a);
TypeScript.logging.log(d,TypeScript.ConsoleColors.DarkRed);$ts.post(d,c,function(a){desktop.closeSpinner();0!=a.code?desktop.showToastMessage(a.info,"Save SampleInfo","danger"):(desktop.showToastMessage(a.info,"Save SampleInfo","success"),b())})}})(omicsAnalysis||(omicsAnalysis={}));
(function(a){var c=function(a){return Bootstrap.apply(this,arguments)||this};$jscomp.inherits(c,Bootstrap);c.prototype.GetSettings=function(){return apps.gcmodeller.GetSettings()};c.prototype.SaveSettings=function(){var a=apps.gcmodeller,b={BlastBin:"",BlastDb:"",RepositoryRoot:"",RememberWindowStatus:$ts("#RememberWindowStatus").CType().checked,Language:$ts("#language").CType().selectedIndex,CloseAfterProjectLoad:$ts("#CloseAfterProjectLoad").CType().checked,ShowOnStartUp:$ts("#ShowOnStartUp").CType().checked};
b=JSON.stringify(b);a.SaveSettings(b)};c.prototype.init=function(){desktop.loading("Load configurations...");this.rawConfigs=this.GetSettings();this.loadSettings()};c.prototype.loadSettings=function(){return __awaiter(this,void 0,void 0,function b(){var a=this,c,f,h,l,k,m,n,p;return $jscomp.generator.createGenerator(b,function(b){switch(b.nextAddress){case 1:return b.yield(a.rawConfigs,2);case 2:return c=b.yieldResult,b.yield(c.Dev2,3);case 3:return f=b.yieldResult,b.yield(f.IDE,4);case 4:return h=
b.yieldResult,b.yield(f.StartPage,5);case 5:return l=b.yieldResult,k=$ts("#RememberWindowStatus").CType(),b.yield(f.RememberWindowStatus,6);case 6:return k.checked=b.yieldResult,m=$ts("#CloseAfterProjectLoad").CType(),b.yield(l.CloseAfterProjectLoad,7);case 7:return m.checked=b.yieldResult,n=$ts("#ShowOnStartUp").CType(),b.yield(l.ShowOnStartUp,8);case 8:return n.checked=b.yieldResult,p=$ts("#language").CType(),b.yield(h.Language,9);case 9:p.selectedIndex=b.yieldResult,setTimeout(desktop.closeSpinner,
500),b.jumpToEnd()}})})};c.prototype.RememberWindowStatus_onchange=function(){this.SaveSettings()};c.prototype.language_onchange=function(){this.SaveSettings()};c.prototype.CloseAfterProjectLoad_onclick=function(){this.SaveSettings()};c.prototype.ShowOnStartUp_onclick=function(){this.SaveSettings()};$jscomp.global.Object.defineProperties(c.prototype,{appName:{configurable:!0,enumerable:!0,get:function(){return"settings"}}});a.settings=c})(pages||(pages={}));
(function(a){var c=function(d){return a.analysis_session.apply(this,arguments)||this};$jscomp.inherits(c,a.analysis_session);c.prototype.init=function(){};c.prototype.button_open_click=function(){desktop.loading();apps.gcmodeller.getFileOpen(omicsAnalysis.expressionMatrix).then(function(a){return __awaiter(this,void 0,void 0,function e(){var d,c;return $jscomp.generator.createGenerator(e,function(e){if(1==e.nextAddress)return e.yield(a,2);d=e.yieldResult;c=$ts("#matrix-file");c.value=d;desktop.closeSpinner();
e.jumpToEnd()})})})};c.prototype.run_onclick=function(){var d=this;desktop.loading();var b=$ts.value("#rows"),c=$ts.value("#cols"),g=$ts.select.getOption("#algorithm"),f=$ts("#z-score").CType().checked,h=$ts.value("#matrix-file"),l={layout:[b,c],algorithm:g,z_score:f,file:h,ssid:""};l.ssid=a.analysis_session.prototype.generateSsid.call(this,l);apps.gcmodeller.sendPost($ts.url("@web_invoke_clustering"),JSON.stringify(l)).then(function(b){return __awaiter(this,void 0,void 0,function n(){return $jscomp.generator.createGenerator(n,
function(a){desktop.promiseAsyncCallback(b,function(b,a){b?(d.session_id=l.ssid,d.refresh_Rplot_onclick(),b=$ts.csv(a.info,!0).Objects().Take(10),$ts("#patterns-table").clear(),$ts.appendTable(b,"#patterns-table",null,{class:["table","table-sm"]})):desktop.showToastMessage(a.info,"Run CMeans","danger")});a.jumpToEnd()})})})};c.prototype.refresh_Rplot_onclick=function(){var a=$ts.select.getOption("#colorSet");a={ssid:this.session_id,colorSet:a};desktop.loading();apps.gcmodeller.sendPost($ts.url("@web_invoke_Rplot"),
JSON.stringify(a)).then(function(b){return __awaiter(this,void 0,void 0,function g(){return $jscomp.generator.createGenerator(g,function(a){desktop.promiseAsyncCallback(b,function(b,a){b?(b=a.info+"?refresh="+md5(desktop.now()),$ts("#Rplot-box").CType().href=b,$ts("#Rplot_js").CType().src=b,$ts.goto("#example-3-collapsible"),$ts("#busy-indicator").hide(),desktop.showToastMessage("Expression data patterns plot success!","Plot Patterns","success")):desktop.showToastMessage(a.info,"Plot Patterns","danger")});
a.jumpToEnd()})})})};$jscomp.global.Object.defineProperties(c.prototype,{appName:{configurable:!0,enumerable:!0,get:function(){return"cmeans_pattern"}}});a.cmeans_patterns=c})(pages||(pages={}));
(function(a){var c=function(d){return a.analysis_session.apply(this,arguments)||this};$jscomp.inherits(c,a.analysis_session);c.prototype.init=function(){};c.prototype.button_open_click=function(){var a=$ts("#matrix-file").CType(),b=$ts("#busy-indicator");b.show();apps.gcmodeller.getFileOpen("Excel Matrix(*.csv)|*.csv").then(function(d){return __awaiter(this,void 0,void 0,function f(){var c;return $jscomp.generator.createGenerator(f,function(e){if(1==e.nextAddress)return c=a,e.yield(d,2);c.value=e.yieldResult;
b.hide();e.jumpToEnd()})})})};c.prototype.run_click=function(){desktop.loading();var d=$ts.value("#matrix-file"),b=$ts.value("#dimensions"),e=$ts.select.getOption("#algorithm"),g=a.analysis_session.prototype.generateSsid.call(this,{file:d,dims:b,algo:e}),f=$ts("#z-score").CType().checked;b=JSON.stringify({file:d,ssid:g,dims:b,algorithm:e,z_score:f});var h=this;Strings.Empty(d)?desktop.showToastMessage("The matrix data input file can not be nothing!","Data Embedding Analysis","danger"):apps.gcmodeller.sendPost($ts.url("@web_invoke_embedding"),
b).then(function(b){return __awaiter(this,void 0,void 0,function m(){return $jscomp.generator.createGenerator(m,function(a){desktop.promiseAsyncCallback(b,function(b,a){b?(b=$ts.csv(a.info,!0).Objects().Take(10),h.session_id=g,$ts("#embedding-table").clear(),$ts.appendTable(b,"#embedding-table",null,{class:["table","table-sm"]}),c.plot3DScatter(g),desktop.showToastMessage("Run Data Embedding Analysis Success!",e+" Task Success","success")):desktop.showToastMessage(a.info,e+" Task Error","danger")});
a.jumpToEnd()})})})};c.plot3DScatter=function(a){a=JSON.stringify({ssid:a,k:$ts.value("#kmeans")});apps.gcmodeller.sendPost($ts.url("@web_invoke_Rplot"),a).then(function(b){desktop.promiseAsyncCallback(b,function(b,a){b?(b=a.info+"?refresh="+md5(desktop.now()),$ts("#Rplot-box").CType().href=b,$ts("#Rplot_js").CType().src=b,$ts.goto("#example-3-collapsible"),$ts("#busy-indicator").hide()):desktop.showToastMessage(a.info,"Rplot Error","danger")})})};c.prototype.refresh_Rplot_click=function(){desktop.loading();
Strings.Empty(this.session_id)?desktop.showToastMessage("Data session id can not be nothing!","Rplot Error","danger"):c.plot3DScatter(this.session_id)};c.prototype.save_project_click=function(){desktop.showToastMessage("You should run this analysis from a data analysis project","Report Error","danger")};c.prototype.download_zip_click=function(){var a=$ts.url("@web_invoke_zip"),b=JSON.stringify({ssid:this.session_id});desktop.loading();Strings.Empty(this.session_id)?desktop.showToastMessage("Data session id can not be nothing!",
"Report Error","danger"):apps.gcmodeller.sendPost(a,b).then(function(b){return __awaiter(this,void 0,void 0,function f(){return $jscomp.generator.createGenerator(f,function(a){desktop.promiseAsyncCallback(b,function(b,a){b?window.open(a.info,"newW","\n                                height=500, width=800, top=100, left=100, toolbar=no, \n                                menubar=no,\n                                scrollbars=no,resizable=no, location=no, \n                                status=no"):
desktop.showToastMessage(a.info,"Report Error","danger");$ts("#download-group").show();$ts("#busy-indicator").hide()});a.jumpToEnd()})})})};$jscomp.global.Object.defineProperties(c.prototype,{appName:{configurable:!0,enumerable:!0,get:function(){return"dataEmbedding"}}});a.dataEmbedding=c})(pages||(pages={}));
(function(a){var c=function(d){return a.analysis_session.apply(this,arguments)||this};$jscomp.inherits(c,a.analysis_session);c.prototype.init=function(){var a=this;$ts.location.hasQueryArguments&&(this.database=$ts.location("id"));console.log($ts.location);$ts("#busy-indicator").hide();$ts("#background").onchange=function(){a.background_onchange($ts.select.getOption("#background"))}};c.prototype.background_onchange=function(a){var b=c.note_mapping[a],d;for(d in c.note_mapping)$ts("#"+c.note_mapping[d]).hide();
console.log("show about '"+a+" -> "+b+"'!");$ts("#"+b).show()};c.prototype.run_onclick=function(){if(Strings.Empty(this.database))desktop.showToastMessage("Please select a database at first!","Enrichment Analysis","danger");else{desktop.loading();var a=$ts.select.getOption("#background"),b=$ts.value("#input_idlist");Strings.Empty(a)?desktop.showToastMessage("Please select a background for enrichment analysis at first!","Enrichment Analysis","danger"):Strings.Empty(b)?desktop.showToastMessage("No gene/protein id list to run enrichment analysis!",
"Enrichment Analysis","danger"):this.runInternal(a,b)}};c.term_url=function(a){switch(a){case "keyword":return function(b){return'<a target="__blank" href="https://www.uniprot.org/keywords/'+b[""]+'">'+b.name+"</a>"};case "GO":return function(b){return'<a target="__blank" href="http://amigo.geneontology.org/amigo/term/'+b[""]+'">'+b.name+"</a>"};case "Pfam":return function(b){return'<a target="__blank" href="https://www.ebi.ac.uk/interpro/entry/pfam/'+b[""]+'/">'+b.name+"</a>"};case "InterPro":return function(b){return'<a target="__blank" href="https://www.ebi.ac.uk/interpro/entry/InterPro/'+
b[""]+'/">'+b.name+"</a>"};case "EC":return function(b){return'<a target="__blank" href="https://www.genome.jp/dbget-bin/www_bfind_sub?mode=bfind&max_hit=1000&dbkey=enzyme&keywords='+b[""]+'">'+b.name+"</a>"};default:return function(b){return b.name}}};c.prototype.runInternal=function(d,b){var e=a.analysis_session.prototype.generateSsid.call(this,{type:d,symbols:b}),g=this;b=JSON.stringify({id:this.database,background:d,symbols:Strings.lineTokens(b),ssid:e});var f=c.term_url(d);apps.gcmodeller.sendPost($ts.url("@web_invoke_enrichment"),
b).then(function(b){desktop.promiseAsyncCallback(b,function(b,a){var d=b?"Run Enrichment Success":"Analysis Error",c=a.info;console.log(c);b?(b=$ts.csv(c,!0).Objects().Where(function(b){return.05>b.pvalue}).Select(function(b){b.name=f(b);return b}),$ts("#enrichment-result-table").clear(),$ts.appendTable(b,"#enrichment-result-table",null,{class:["table","table-sm"]}),g.session_id=e,g.plot_onclick(),desktop.showToastMessage("Success!",d,"success")):desktop.showToastMessage(a.info,d,"danger")})})};c.prototype.plot_onclick=
function(){desktop.loading();var a=JSON.stringify({session_id:this.session_id,type:"bar",background:$ts.select.getOption("#background"),top:5});apps.gcmodeller.sendPost($ts.url("@web_invoke_Rplot?base64=true"),a).then(function(b){return __awaiter(this,void 0,void 0,function g(){return $jscomp.generator.createGenerator(g,function(a){desktop.parseMessage(b).then(function(a){desktop.parseResultFlag(b,a).then(function(b){var d=b?"Run Enrichment Success":"Analysis Error",c=a.info;console.log(c);b?($ts("#Rplot").CType().src=
c,$ts("#Rplot-box").CType().href=c,$ts("#busy-indicator").hide()):desktop.showToastMessage(a.info,d,"danger")})});a.jumpToEnd()})})})};$jscomp.global.Object.defineProperties(c.prototype,{appName:{configurable:!0,enumerable:!0,get:function(){return"enrichment_analysis"}}});c.note_mapping={GO:"go_note",keyword:"uniprot_note",Pfam:"pfam_note",InterPro:"interpro_note",EC:"ec_note",eggNOG:"eggnog_note"};a.enrichment_analysis=c})(pages||(pages={}));
(function(a){var c=function(d){return a.analysis_session.apply(this,arguments)||this};$jscomp.inherits(c,a.analysis_session);c.prototype.init=function(){this.add_equation_click()};c.prototype.loadDemo_click=function(){$ts.value("#time_final","30");$ts.value("#resolution","100");$ts("#equations").clear();$ts("#constant-list").clear();for(var a=$jscomp.makeIterator([["x1=beta1*(lamda1*(1+alpha1*(x4^n1)/(1+x4^n1))-x1)",-10],["x2=x1-x2",-10],["x3=beta3*(lamda3*(1+alpha2*((x4/a)^n2)/(1+(x4/a)^n2))*(1/(1+x2^n3))-x3)",
0],["x4=beta4*(x3-x4)",10]]),b=a.next();!b.done;b=a.next()){b=b.value;var c=this.add_equation_click();c.eq.value=b[0].toString();c.y0.value=b[1].toString()}a=$jscomp.makeIterator([["beta1","30"],["beta3","30"],["beta4","1"],["lamda1","2"],["lamda3","2"],["alpha1","20"],["alpha2","20"],["alpha3","1"],["a","1"],["n1","4"],["n2","5"],["n3","1"]]);for(b=a.next();!b.done;b=a.next())b=b.value,c=this.add_constant_click(),c.name.value=b[0].toString(),c.val.value=b[1].toString();this.equationIndexing($ts(".eq-index"));
this.equationIndexing($ts(".const-index"));desktop.showToastMessage("Load 'Atkinson.txt' demo example success!","PLAS Script","info")};c.prototype.add_equation_click=function(){var a=$ts("#equations"),b=$ts("<div>",{class:["input-group","mb-3","equation"]}).display('\n                <span class="input-group-text eq-index">1. </span>\n                <input type="text" class="form-control" placeholder="y=f(x) at here"\n                    aria-label="ode">\n                <span class="input-group-text">, y<sub>0</sub>=</span>\n                <input type="text" class="form-control"\n                    placeholder="Initial value of variable y" aria-label="y0">\n                <button class="btn btn-danger del-eq" type="button"> Remove\n                </button>\n            '),
c=this,g=b.getElementsByTagName("input"),f=g.item(0);g=g.item(1);a.appendElement(b);$ts(".del-eq").onClick(function(b){b.removeAttribute("onclick");a.removeChild(b.parentElement);c.equationIndexing($ts(".eq-index"))});c.equationIndexing($ts(".eq-index"));return{eq:f,y0:g}};c.prototype.equationIndexing=function(a){a.ForEach(function(b,a){b.innerText=a+1+". "})};c.prototype.add_constant_click=function(){var a=$ts("#constant-list"),b=$ts("<div>",{class:["input-group","mb-3","const"]}).display('\n                <span class="input-group-text const-index">1. </span>\n                <input type="text" class="form-control" placeholder="put constant symbol name at here"\n                    aria-label="constant">\n                <span class="input-group-text">, constant value=</span>\n                <input type="text" class="form-control"\n                    placeholder="Constant value of current symbol" aria-label="const_val">\n                <button class="btn btn-danger del-const" type="button"> Remove\n                </button>\n            '),
c=this,g=b.getElementsByTagName("input"),f=g.item(0);g=g.item(1);a.appendElement(b);$ts(".del-const").onClick(function(b){b.removeAttribute("onclick");a.removeChild(b.parentElement);c.equationIndexing($ts(".const-index"))});c.equationIndexing($ts(".const-index"));return{name:f,val:g}};c.loadContents=function(a){a=$ts("."+a);var b=[];a.ForEach(function(a){var c=a.getElementsByTagName("input");a=c.item(0);c=c.item(1);a={target:a.value,value:c.value};Strings.Empty(a.target)||b.push(a)});b.length!=a.Count&&
desktop.showToastMessage("Some data is leaves empty, you can removes these empty data slots.","Check PLAS Parameters","warning");return b};c.prototype.run_click=function(){var d=this;desktop.loading();var b=c.loadContents("equation"),e=c.loadContents("const"),g=$ts.value("#time_final"),f=$ts.value("#resolution");if(0==b.length)desktop.showToastMessage("No ODEs system equations!","Check PLAS Parameters","danger");else{var h=a.analysis_session.prototype.generateSsid.call(this,{sys:b,const:e,t:g,resolution:f});
b=JSON.stringify({odes:JSON.stringify(b),constants:JSON.stringify(e),final_time:g,resolution:f,session_id:h});apps.gcmodeller.sendPost($ts.url("@web_invoke_run_plas"),b).then(function(b){return __awaiter(this,void 0,void 0,function m(){return $jscomp.generator.createGenerator(m,function(a){desktop.promiseAsyncCallback(b,function(b,a){b?(b=$ts.csv(a.info,!0).Objects(),$ts("#plas-table").clear(),$ts.appendTable(b,"#plas-table",null,{class:["table","table-sm"]}),d.session_id=h,d.createPlot(),desktop.showToastMessage("Run system simulation job done!",
"Run PLAS","success")):desktop.showToastMessage(a.info,"Run PLAS","danger");desktop.closeSpinner()});a.jumpToEnd()})})})}};c.prototype.createPlot=function(){var a=JSON.stringify({ssid:this.session_id});apps.gcmodeller.sendPost($ts.url("@web_invoke_Rplot"),a).then(function(b){return __awaiter(this,void 0,void 0,function g(){return $jscomp.generator.createGenerator(g,function(a){desktop.promiseAsyncCallback(b,function(b,a){b?(b=a.info+"?refresh="+md5(desktop.now()),$ts("#Rplot-box").CType().href=b,
$ts("#Rplot_js").CType().src=b,$ts.goto("#example-3"),desktop.showToastMessage("Simulator data rendering job done!","Run PLAS","info")):desktop.showToastMessage(a.info,"Run PLAS","danger")});a.jumpToEnd()})})})};$jscomp.global.Object.defineProperties(c.prototype,{appName:{configurable:!0,enumerable:!0,get:function(){return"plas"}}});a.runPLAS=c})(pages||(pages={}));
(function(a){var c=function(c){return a.analysis_session.apply(this,arguments)||this};$jscomp.inherits(c,a.analysis_session);c.prototype.init=function(){};c.prototype.button_open_onclick=function(){desktop.loading("Open matrix file...");apps.gcmodeller.getFileOpen(omicsAnalysis.expressionMatrix).then(function(a){return __awaiter(this,void 0,void 0,function e(){var c,d;return $jscomp.generator.createGenerator(e,function(e){if(1==e.nextAddress)return e.yield(a,2);c=e.yieldResult;d=$ts("#matrix-file");
d.value=c;desktop.closeSpinner();e.jumpToEnd()})})})};c.prototype.run_onclick=function(){var c=this;desktop.loading("Do z-score plot...");var b={file:$ts.value("#matrix-file"),ssid:""};b.ssid=a.analysis_session.prototype.generateSsid.call(this,b);apps.gcmodeller.sendPost($ts.url("@web_invoke_zscore"),JSON.stringify(b)).then(function(a){return __awaiter(this,void 0,void 0,function f(){return $jscomp.generator.createGenerator(f,function(d){desktop.promiseAsyncCallback(a,function(a,d){a?(c.session_id=
b.ssid,c.refresh_Rplot_onclick(),a=$ts.csv(d.info,!0).Objects().Take(10),$ts("#zscore-table").clear(),$ts.appendTable(a,"#zscore-table",null,{class:["table","table-sm"]})):desktop.showToastMessage(d.info,"Run Z-score","danger")});d.jumpToEnd()})})})};c.prototype.refresh_Rplot_onclick=function(){var a=$ts.select.getOption("#colorSet");a={ssid:this.session_id,colorSet:a};desktop.loading("Do z-score plot...");apps.gcmodeller.sendPost($ts.url("@web_invoke_Rplot"),JSON.stringify(a)).then(function(b){return __awaiter(this,
void 0,void 0,function g(){return $jscomp.generator.createGenerator(g,function(a){desktop.promiseAsyncCallback(b,function(b,a){b?(b=a.info+"?refresh="+md5(desktop.now()),$ts("#Rplot-box").CType().href=b,$ts("#Rplot_js").CType().src=b,$ts.goto("#example-3-collapsible"),desktop.closeSpinner(),desktop.showToastMessage("Expression data patterns plot success!","Plot Z-score","success")):desktop.showToastMessage(a.info,"Plot Z-score","danger")});a.jumpToEnd()})})})};$jscomp.global.Object.defineProperties(c.prototype,
{appName:{configurable:!0,enumerable:!0,get:function(){return"z_score"}}});a.zscore_analysis=c})(pages||(pages={}));
(function(a){(function(a){var c=function(b){return Bootstrap.apply(this,arguments)||this};$jscomp.inherits(c,Bootstrap);c.prototype.init=function(){this.expr1_onclick()};c.prototype.expr1_onclick=function(){$ts("#expr1").addClass("stepper-active");$ts("#sample2").removeClass("stepper-active");$ts("#create3").removeClass("stepper-active");$ts("#panel1").show();$ts("#panel2").hide();$ts("#panel3").hide()};c.prototype.sample2_onclick=function(){$ts("#expr1").removeClass("stepper-active");$ts("#sample2").addClass("stepper-active");
$ts("#create3").removeClass("stepper-active");$ts("#panel1").hide();$ts("#panel2").show();$ts("#panel3").hide()};c.prototype.create3_onclick=function(){$ts("#expr1").removeClass("stepper-active");$ts("#sample2").removeClass("stepper-active");$ts("#create3").addClass("stepper-active");$ts("#panel1").hide();$ts("#panel2").hide();$ts("#panel3").show()};c.prototype.button_open_matrix_click=function(){var b=$ts("#matrix-file").CType(),a=this;apps.gcmodeller.getFileOpen("Excel Table(*.csv)|*.csv|GCModeller HTS Matrix(*.HTS)|*.HTS").then(function(c){return __awaiter(this,
void 0,void 0,function h(){var d;return $jscomp.generator.createGenerator(h,function(e){if(1==e.nextAddress)return d=b,e.yield(c,2);d.value=e.yieldResult;a.check_matrix(b.value);e.jumpToEnd()})})})};c.prototype.check_matrix=function(b){};c.prototype.button_open_sampleinfo_click=function(){var b=$ts("#sample-file").CType();apps.gcmodeller.getFileOpen("Excel Table(*.csv)|*.csv").then(function(a){return __awaiter(this,void 0,void 0,function f(){var c;return $jscomp.generator.createGenerator(f,function(d){if(1==
d.nextAddress)return c=b,d.yield(a,2);c.value=d.yieldResult;d.jumpToEnd()})})})};$jscomp.global.Object.defineProperties(c.prototype,{appName:{configurable:!0,enumerable:!0,get:function(){return"create_project"}}});a.create_project=c})(a.analysis_project||(a.analysis_project={}))})(pages||(pages={}));
(function(a){(function(a){var c=function(b){return Bootstrap.apply(this,arguments)||this};$jscomp.inherits(c,Bootstrap);c.prototype.init=function(){app.initSampleEditor();var b=this;this.reset();$ts("#save").onclick=function(){b.save(null)}};c.prototype.reset=function(){var b=this,a=this;omicsAnalysis.parseSampleInfo(this.analysisFile,function(a){return b.beginEditSampleInfo1(a)},function(){layer.confirm("\u8001\u5e08\u597d\uff0c\u60a8\u76ee\u524d\u8fd8\u6ca1\u6709\u4e0a\u4f20\u6837\u672c\u5206\u7ec4\u4fe1\u606f\u6587\u4ef6\uff0c\u662f\u5426\u9700\u8981\u8fdb\u884c\u81ea\u52a8\u89e3\u6790\uff1f",
{btn:["\u786e\u5b9a","\u53d6\u6d88"]},function(){desktop.closeSpinner();a.beginEditSampleInfo0()},function(){$goto("/analysis/file?analysis_file="+$ts("@analysis_file"))})})};c.prototype.beginEditSampleInfo0=function(){var b=this;$ts.get("@api:xcms_id",function(a){0==a.code?b.beginEditSampleInfo($from(a.info).Skip(1).ToArray(!1)):desktop.showToastMessage(a.info,"Sample Editor","danger")})};c.prototype.beginEditSampleInfo1=function(b){var a=this,c=this;c.sampleEditor=new sampleinfo_editor.ui.sampleInfoUI("#edit_sampleinfo",
b,function(b){return a.xload_sampleInfo(b)},function(){return c.editor.fieldHeaders})};c.prototype.beginEditSampleInfo=function(b){var a=this,c=this;TypeScript.logging.log("all sample names from the raw matrix data:");TypeScript.logging.log(JSON.stringify(b));c.sampleEditor=new sampleinfo_editor.ui.sampleInfoUI("#edit_sampleinfo",b,function(b){return a.xload_sampleInfo(b)},function(){return c.editor.fieldHeaders})};c.prototype.save=function(b){desktop.loading("Save your sample information, wait for a while...");
for(var a=0,c=this.editor.TableRows(),d=$jscomp.makeIterator(this.editor.TableData(!1)),h=d.next();!h.done;h=d.next())h=h.value,this.sampleInfo[h.ID].injectionOrder=h.injectionOrder,this.sampleInfo[h.ID].batch=h.batch,this.sampleInfo[h.ID].sample_info=h.sample_info,this.sampleInfo[h.ID].sample_info1=h.sample_info1,this.sampleInfo[h.ID].sample_info2=h.sample_info2,this.sampleInfo[h.ID].sample_name=h.sample_name,c[a++].dropFlag?this.sampleInfo[h.ID].delete="1":this.sampleInfo[h.ID].delete="0";a=[];
for(var l in this.sampleInfo)a.push(this.sampleInfo[l]);omicsAnalysis.saveSampleInfo(a,this.analysisFile,b)};c.prototype.xload_sampleInfo=function(b){for(var a=!1,d=$jscomp.makeIterator(b),f=d.next();!f.done;f=d.next())f=f.value,Strings.Empty(f.delete,!0)?f.delete="0":"undefined"==f.delete&&(f.delete="0"),Strings.Empty(""+f.injectionOrder,!0)&&(f.injectionOrder=0),Strings.Empty(""+f.batch,!0)&&(f.batch=0),"sample_ID"in f?(f.ID=f.sample_ID,a=!0,delete f.sample_ID):Strings.Empty(f.ID,!0)&&""in f&&(f.ID=
f[""],a=!0,delete f[""]);a&&desktop.showToastMessage("We found some format error in your sampleinfo table file, please click on the [Save] button for fix this probem!","SampleInfo Editor","warning");this.sampleInfo={};this.editor=sampleinfo_editor.table_editor.fromData(b,"#edit_sampleinfo","ID sample_name sample_info sample_info1 sample_info2 injectionOrder batch".split(" "),{deleteRow:c.deleteSampleRow,className:"table",table_id:"sampleinfo",allowsAddNew:!1,names:{remove:"\u5220\u9664\u6837\u672c",
edit:"\u7f16\u8f91\u6837\u672c",OK:"\u786e\u8ba4",cancel:"\u53d6\u6d88",actions:"\u64cd\u4f5c"},tdConfig:[{title:"\u6837\u672c\u7f16\u53f7",lockEditor:!0},{title:"\u6837\u672c\u540d\u79f0",lockEditor:!1},{title:"\u7ec4\u522b\u540d\u79f0",lockEditor:!1},{title:"\u4e9a\u578b\u5206\u7c7bA",lockEditor:!1},{title:"\u4e9a\u578b\u5206\u7c7bB",lockEditor:!1},{title:"\u8fdb\u6837\u987a\u5e8f",lockEditor:!1},{title:"\u8fdb\u6837\u6279\u6b21",lockEditor:!1}]});a=this.editor.TableRows();d=0;b=$jscomp.makeIterator(b);
for(f=b.next();!f.done;f=b.next()){var h=f.value;this.sampleInfo[h.ID]=h;f=a[d++];"0"!=h.delete&&c.deleteSampleRow(f.tr,f)}return this.editor.table};c.deleteSampleRow=function(a,c){a.cells.item(0);c.dropFlag?(a.style.backgroundColor="white",c.getElementById("remove").innerHTML="\u5220\u9664\u6837\u672c"):(a.style.backgroundColor="gray",c.getElementById("remove").innerHTML="\u6062\u590d\u6837\u672c");c.dropFlag=!c.dropFlag};$jscomp.global.Object.defineProperties(c.prototype,{appName:{configurable:!0,
enumerable:!0,get:function(){return"edit_sampleinfo"}}});a.edit_sampleinfo=c})(a.analysis_project||(a.analysis_project={}))})(pages||(pages={}));
(function(a){(function(a){var c=function(a,c,d,f,h,l,k){a=void 0===a?document.createElement("canvas"):a;c=void 0===c?a.getContext("2d"):c;d=void 0===d?{x:null,y:null,max:2E4}:d;f=void 0===f?[0,0]:f;h=void 0===h?[]:h;this.uCanvas=a;this.uContext=c;this.f=d;this.size=f;this.dots=h;this.setting=void 0===l?null:l;this.frameRender=void 0===k?null:k};c.getTag=function(a){return document.getElementsByTagName(a)[0]};c.getById=function(a){return document.getElementById(a)};c.prototype.canvasResize=function(){this.uCanvas.width=
window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;this.uCanvas.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;this.size=[this.uCanvas.width,this.uCanvas.height]};c.prototype.update=function(){var a=this,d=[a.f].concat(a.dots),g,f,h;a.uContext.clearRect(0,0,a.size[0],a.size[1]);var l=$jscomp.makeIterator(a.dots);for(g=l.next();!g.done;g=l.next()){var k=g.value;k.x+=k.xa;k.y+=k.ya;k.xa*=k.x>a.size[0]||0>k.x?-1:1;k.ya*=k.y>
a.size[1]||0>k.y?-1:1;a.uContext.fillRect(k.x-.5,k.y-.5,1,1);for(f=0;f<d.length;f++)if(g=d[f],k!==g&&null!==g.x&&null!==g.y){var m=k.x-g.x;var n=k.y-g.y;var p=m*m+n*n;p<g.max&&(g===a.f&&p>=g.max/2&&(k.x-=.03*m,k.y-=.03*n),h=(g.max-p)/g.max,a.uContext.beginPath(),a.uContext.lineWidth=h/2,a.uContext.strokeStyle="rgba("+a.setting.color+", "+(h+.2)+")",a.uContext.moveTo(k.x,k.y),a.uContext.lineTo(g.x,g.y),a.uContext.stroke())}d.splice(d.indexOf(k),1)}c.defaultCallback(function(){return a.update()})};
c.defaultCallback=function(a){window.setTimeout(a,1E3/45);return 0};c.prototype.registerDevice=function(){var a=this;a.frameRender=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||c.defaultCallback;window.onresize=a.canvasResize;window.onmousemove=function(b){b=b||window.event;a.f.x=b.clientX;a.f.y=b.clientY};window.onmouseout=function(){a.f.x=null;a.f.y=null}};a.network=c;a.run=function(a,
d){a=void 0===a?null:a;d=void 0===d?{canvasId:"canvas-network-display",zIndex:-1,opacity:1,color:"0,104,183",n:100}:d;var b=new c;b.setting=d;b.uCanvas.id="canvas_"+d.canvasId;b.uCanvas.style.cssText="position:fixed; top:0; left:0; z-index: "+d.zIndex+"; opacity: "+d.opacity;a?c.getById(a).appendChild(b.uCanvas):c.getTag("body").appendChild(b.uCanvas);b.canvasResize();b.registerDevice();for(a=0;d.n>a;a++)b.dots.push({x:Math.random()*b.size[0],y:Math.random()*b.size[1],xa:2*Math.random()-1,ya:2*Math.random()-
1,max:1E4});setTimeout(function(){return b.update()},100)}})(a.background||(a.background={}))})(pages||(pages={}));
(function(a){(function(a){var c=function(a){return Bootstrap.apply(this,arguments)||this};$jscomp.inherits(c,Bootstrap);c.prototype.init=function(){this.scanDatabaseList()};c.prototype.scanDatabaseList=function(){var a=this;desktop.loading();apps.gcmodeller.scanDatabase().then(function(b){return __awaiter(this,void 0,void 0,function f(){var c;return $jscomp.generator.createGenerator(f,function(d){if(1==d.nextAddress)return d.yield(b,2);c=d.yieldResult;a.showDatabaseList(c);d.jumpToEnd()})})})};c.prototype.showDatabaseList=
function(a){a=JSON.parse(a||"[]");var b=Object.keys(a).length,d=$ts("#repository"),f={},h;for(h in a){f.$jscomp$loop$prop$key$20=h;f.$jscomp$loop$prop$metadata$21=a[f.$jscomp$loop$prop$key$20];var l=c.buildDbCard(f.$jscomp$loop$prop$key$20,f.$jscomp$loop$prop$metadata$21);d.appendElement(l);console.log(f.$jscomp$loop$prop$key$20);$ts("#"+f.$jscomp$loop$prop$key$20).onclick=function(a){return function(){apps.gcmodeller.openEnrichmentPage(a.$jscomp$loop$prop$key$20,a.$jscomp$loop$prop$metadata$21.name,
a.$jscomp$loop$prop$metadata$21.note)}}(f);$ts("#"+f.$jscomp$loop$prop$key$20+"-meta").onclick=function(a){return function(){desktop.loading();c.showMetadata(a.$jscomp$loop$prop$key$20,a.$jscomp$loop$prop$metadata$21)}}(f);f={$jscomp$loop$prop$key$20:f.$jscomp$loop$prop$key$20,$jscomp$loop$prop$metadata$21:f.$jscomp$loop$prop$metadata$21}}desktop.closeSpinner();desktop.showToastMessage("Found "+b+" database.","Enrichment Database Repository","info")};c.showMetadata=function(a,d){var b="",e=JSON.stringify({guid:a});
b+='<span class="badge badge-primary">Database Name</span>: '+d.name+"("+a+")<br />";b+='<span class="badge badge-primary">Note</span>: <p class="note note-light">'+d.note+"</p><br />";apps.gcmodeller.sendPost($ts.url("@web_invoke_inspector"),e).then(function(d){return __awaiter(this,void 0,void 0,function k(){return $jscomp.generator.createGenerator(k,function(e){desktop.promiseAsyncCallback(d,function(d,e){c.displayDatabaseContentSummary(a,b,d,e)});e.jumpToEnd()})})})};c.displayDatabaseContentSummary=
function(a,d,g,f){var b=g?"Load Database Success":"Load Database Error",e=f.info,k=null;console.log(e);if(g){var m=$from(Object.keys(e.summary)).Select(function(a){return{name:a,info:e.summary[a]}}).Where(function(a){return 0<a.info.unique_size}).Where(function(a){return 1<a.info.unique_size/a.info.clusters});g=m.Select(function(a){return c.summaryLine(a.name,a.info)}).JoinBy("");desktop.showToastMessage("Success!",b,"success");k=function(){for(var b={},d=$jscomp.makeIterator(m.ToArray()),e=d.next();!e.done;b=
{$jscomp$loop$prop$name$23:b.$jscomp$loop$prop$name$23,$jscomp$loop$prop$model$24:b.$jscomp$loop$prop$model$24},e=d.next())b.$jscomp$loop$prop$model$24=e.value,b.$jscomp$loop$prop$name$23=b.$jscomp$loop$prop$model$24.name,e="#model-"+b.$jscomp$loop$prop$name$23,console.log(e),$ts(e).onclick=function(b){return function(){desktop.loading();console.log("view background model: "+b.$jscomp$loop$prop$name$23+"...");c.viewModel(a,b.$jscomp$loop$prop$name$23,b.$jscomp$loop$prop$model$24.info)}}(b)};d+='<span class="badge badge-primary">Protein Counts</span>: '+
e.counts+"<br />";d+='<span class="badge badge-primary">Models</span>: '+m.Count+"<br />";d+='<span class="badge badge-primary">Backgrounds</span>: <br /><br />\n                        <ul class="list-group list-group-light">\n                            '+g+"\n                        </ul>\n                    "}else desktop.showToastMessage(f.info,b,"danger");$ts("#summary-info").display(d);isNullOrUndefined(k)||k()};c.viewModel=function(a,c,d){$ts.post("@web_invoke_loadModel",{guid:a,xref:c},
function(a){if(0==a.code){var b=new bootstrap.Modal($ts("#view-background"),{keyboard:!1}),c=a.info.clusters;a=Object.keys(c);a=$from(a).Select(function(a){return'\n                                <li>                                   \n                                    <a \n                                        href="#" \n                                        onclick="pages.enrichment_database.showProteins(\''+c[a].join(",")+'\')">\n                                        <i class="far fa-file-code"></i>&nbsp;&nbsp;'+
a.replace(/[<]/ig,"&lt;")+"\n                                        ["+c[a].length+" proteins]\n                                    </a>                                     \n                                </li>                              \n                            "});$ts("#contentArea").clear();$ts("#contentArea").display(a.JoinBy(""));$ts("#busy-indicator").hide();$ts("#modal-close1").onclick=function(){return b.hide()};$ts("#modal-close2").onclick=function(){return b.hide()};b.show()}else desktop.showToastMessage(a.info,
"Load Model Error","danger")})};c.showProteins=function(a){$ts("#protein_ids").CType().value=a.replace(/,/ig,"\n")};c.summaryLine=function(a,c){return'<li class="list-group-item d-flex justify-content-between align-items-center">\n                        <div class="d-flex align-items-center">\n                            <span class="badge rounded-pill badge-success">                \n                                <i class="fab fa-laravel"></i>&nbsp;'+a+"              \n                            </span>\n                            "+
c.clusters+" / "+c.unique_size+'\n                        </div>\n                        <a id="model-'+a+'" class="btn btn-link btn-rounded btn-sm" href="#" role="button">View</a>\n                    </li>'};c.buildDbCard=function(a,c){return $ts("<div>",{class:["card","shadow-5"],style:"width: 300px;"}).display(' \n                <div class="bg-image hover-overlay ripple hover-zoom" data-mdb-ripple-color="light">\n                    <img src="/assets/images/background.jpg" class="img-fluid hover-shadow"/>\n                    <a href="javascript:void(0);" id="'+
a+'-meta">\n                        <div class="mask" style="background-color: rgba(251, 251, 251, 0.15);"></div>\n                    </a>\n                </div>\n                <div class="card-body">\n                    <h5 class="card-title">'+c.name+'</h5>\n                    <p class="card-text">'+c.note+'</p>\n                    <a id="'+a+'" href="javascript:void(0);" class="btn btn-primary">Run</a>\n                </div>\n            ')};c.prototype.open_uniprot_onclick=function(){var a=
$ts("#formFile").CType();apps.gcmodeller.getUniprotXmlDatabase().then(function(b){return __awaiter(this,void 0,void 0,function f(){var c;return $jscomp.generator.createGenerator(f,function(d){if(1==d.nextAddress)return c=a,d.yield(b,2);c.value=d.yieldResult;d.jumpToEnd()})})})};c.prototype.imports_onclick=function(){desktop.loading();var a={file:$ts.value("#formFile"),name:$ts.value("#title"),note:$ts.value("#description")};$ts.post("@web_invoke_imports",a,function(a){var b=0==a.code,c=b?"Imports Task Success":
"Imports Task Error";b?desktop.showToastMessage(a.info,c,"success"):desktop.showToastMessage(a.info,c,"danger");desktop.closeSpinner()})};$jscomp.global.Object.defineProperties(c.prototype,{appName:{configurable:!0,enumerable:!0,get:function(){return"enrichment_database"}}});a.enrichment_database=c})(a.repository||(a.repository={}))})(pages||(pages={}));
(function(a){(function(a){(function(c){function b(a,b,c,e,k,m,n,p){k=void 0===k?10:k;m=void 0===m?!1:m;n=void 0===n?null:n;p=void 0===p?null:p;var f=$ts(c);f&&(f.clear(),a.populateSuggestion(b,k,m).forEach(function(a){f.appendChild(d(a,p,e))}),isNullOrUndefined(n)||a.hasEquals(b,m)||(a=$ts("<a>",{href:executeJavaScript,text:b,title:b,onclick:function(){n(b)}}).display("add '"+b+"'"),f.append($ts("<div>",{class:p}).display(a))))}function d(a,b,c){var d=$ts("<a>",{href:executeJavaScript,text:a.term,
title:a.term,onclick:function(){c(a)}}).display(a.term);return $ts("<div>",{class:b}).display(d)}c.makeSuggestions=function(c,d,e,l,k,m,n){l=void 0===l?10:l;k=void 0===k?!1:k;m=void 0===m?null:m;n=void 0===n?null:n;var f=new a.suggestion(c);return function(a){b(f,a,d,e,l,k,n,m)}}})(a.render||(a.render={}))})(a.suggestion_list||(a.suggestion_list={}))})(pages||(pages={}));
(function(a){(function(a){var c=function(a){this.terms=a};c.prototype.hasEquals=function(a,c){(c=void 0===c?!1:c)||(a=a.toLowerCase());for(var b=$jscomp.makeIterator(this.terms),d=b.next();!d.done;d=b.next())if(d=d.value,c){if(d.term.toLowerCase()==a)return!0}else if(d.term==a)return!0;return!1};c.prototype.populateSuggestion=function(b,d,g){d=void 0===d?5:d;g=void 0===g?!1:g;var e=b.toLowerCase(),h=$from(this.terms).Select(function(a){var d=c.getScore(a,b,e,g);return{term:a,score:d}}).OrderBy(function(a){return a.score}),
l=h.Where(function(b){return b.score!=a.NA}).Take(d).Select(function(a){return a.term}).ToArray();return l.length==d?l:c.makeAdditionalSuggestion(h,l,g,b,d)};c.makeAdditionalSuggestion=function(a,c,d,f,h){var b=f.toLowerCase();a=a.Skip(c.length).Select(function(a){a=a.term;var c=d?Levenshtein.ComputeDistance(a.term.toLowerCase(),b):Levenshtein.ComputeDistance(a.term,f);return{term:a,score:c}}).OrderBy(function(a){return a.score}).Take(h-c.length).Select(function(a){return a.term}).ToArray();return[].concat($jscomp.arrayFromIterable(c),
$jscomp.arrayFromIterable(a))};c.getScore=function(b,c,d,f){return f?(b=b.term.toLowerCase(),a.term.indexOf(b,d)):b.dist(c)};a.suggestion=c})(a.suggestion_list||(a.suggestion_list={}))})(pages||(pages={}));(function(a){(function(a){a.NA=1E11;var c=function(a,c){this.id=a;this.term=c};c.prototype.dist=function(a){return c.indexOf(this.term,a)};c.indexOf=function(b,c){return-1==b.indexOf(c)?a.NA:Math.abs(c.length-b.length)};a.term=c})(a.suggestion_list||(a.suggestion_list={}))})(pages||(pages={}));
