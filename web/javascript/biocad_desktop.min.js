var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(b){var a=0;return function(){return a<b.length?{done:!1,value:b[a++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.makeIterator=function(b){var a="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return a?a.call(b):$jscomp.arrayIterator(b)};$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.objectCreate=$jscomp.ASSUME_ES5||"function"==typeof Object.create?Object.create:function(b){var a=function(){};a.prototype=b;return new a};$jscomp.underscoreProtoCanBeSet=function(){var b={a:!0},a={};try{return a.__proto__=b,a.a}catch(d){}return!1};$jscomp.setPrototypeOf="function"==typeof Object.setPrototypeOf?Object.setPrototypeOf:$jscomp.underscoreProtoCanBeSet()?function(b,a){b.__proto__=a;if(b.__proto__!==a)throw new TypeError(b+" is not extensible");return b}:null;
$jscomp.inherits=function(b,a){b.prototype=$jscomp.objectCreate(a.prototype);b.prototype.constructor=b;if($jscomp.setPrototypeOf){var d=$jscomp.setPrototypeOf;d(b,a)}else for(d in a)if("prototype"!=d)if(Object.defineProperties){var c=Object.getOwnPropertyDescriptor(a,d);c&&Object.defineProperty(b,d,c)}else b[d]=a[d];b.superClass_=a.prototype};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,a,d){b!=Array.prototype&&b!=Object.prototype&&(b[a]=d.value)};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var b=0;return function(a){return $jscomp.SYMBOL_PREFIX+(a||"")+b++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.asyncIterator;b||(b=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};$jscomp.generator={};
$jscomp.generator.ensureIteratorResultIsObject_=function(b){if(!(b instanceof Object))throw new TypeError("Iterator result "+b+" is not an object");};$jscomp.generator.Context=function(){this.isRunning_=!1;this.yieldAllIterator_=null;this.yieldResult=void 0;this.nextAddress=1;this.finallyAddress_=this.catchAddress_=0;this.finallyContexts_=this.abruptCompletion_=null};
$jscomp.generator.Context.prototype.start_=function(){if(this.isRunning_)throw new TypeError("Generator is already running");this.isRunning_=!0};$jscomp.generator.Context.prototype.stop_=function(){this.isRunning_=!1};$jscomp.generator.Context.prototype.jumpToErrorHandler_=function(){this.nextAddress=this.catchAddress_||this.finallyAddress_};$jscomp.generator.Context.prototype.next_=function(b){this.yieldResult=b};
$jscomp.generator.Context.prototype.throw_=function(b){this.abruptCompletion_={exception:b,isException:!0};this.jumpToErrorHandler_()};$jscomp.generator.Context.prototype.return=function(b){this.abruptCompletion_={return:b};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.jumpThroughFinallyBlocks=function(b){this.abruptCompletion_={jumpTo:b};this.nextAddress=this.finallyAddress_};$jscomp.generator.Context.prototype.yield=function(b,a){this.nextAddress=a;return{value:b}};
$jscomp.generator.Context.prototype.yieldAll=function(b,a){b=$jscomp.makeIterator(b);var d=b.next();$jscomp.generator.ensureIteratorResultIsObject_(d);if(d.done)this.yieldResult=d.value,this.nextAddress=a;else return this.yieldAllIterator_=b,this.yield(d.value,a)};$jscomp.generator.Context.prototype.jumpTo=function(b){this.nextAddress=b};$jscomp.generator.Context.prototype.jumpToEnd=function(){this.nextAddress=0};
$jscomp.generator.Context.prototype.setCatchFinallyBlocks=function(b,a){this.catchAddress_=b;void 0!=a&&(this.finallyAddress_=a)};$jscomp.generator.Context.prototype.setFinallyBlock=function(b){this.catchAddress_=0;this.finallyAddress_=b||0};$jscomp.generator.Context.prototype.leaveTryBlock=function(b,a){this.nextAddress=b;this.catchAddress_=a||0};
$jscomp.generator.Context.prototype.enterCatchBlock=function(b){this.catchAddress_=b||0;b=this.abruptCompletion_.exception;this.abruptCompletion_=null;return b};$jscomp.generator.Context.prototype.enterFinallyBlock=function(b,a,d){d?this.finallyContexts_[d]=this.abruptCompletion_:this.finallyContexts_=[this.abruptCompletion_];this.catchAddress_=b||0;this.finallyAddress_=a||0};
$jscomp.generator.Context.prototype.leaveFinallyBlock=function(b,a){a=this.finallyContexts_.splice(a||0)[0];if(a=this.abruptCompletion_=this.abruptCompletion_||a){if(a.isException)return this.jumpToErrorHandler_();void 0!=a.jumpTo&&this.finallyAddress_<a.jumpTo?(this.nextAddress=a.jumpTo,this.abruptCompletion_=null):this.nextAddress=this.finallyAddress_}else this.nextAddress=b};$jscomp.generator.Context.prototype.forIn=function(b){return new $jscomp.generator.Context.PropertyIterator(b)};
$jscomp.generator.Context.PropertyIterator=function(b){this.object_=b;this.properties_=[];for(var a in b)this.properties_.push(a);this.properties_.reverse()};$jscomp.generator.Context.PropertyIterator.prototype.getNext=function(){for(;0<this.properties_.length;){var b=this.properties_.pop();if(b in this.object_)return b}return null};$jscomp.generator.Engine_=function(b){this.context_=new $jscomp.generator.Context;this.program_=b};
$jscomp.generator.Engine_.prototype.next_=function(b){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_.next,b,this.context_.next_);this.context_.next_(b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.return_=function(b){this.context_.start_();var a=this.context_.yieldAllIterator_;if(a)return this.yieldAllStep_("return"in a?a["return"]:function(a){return{value:a,done:!0}},b,this.context_.return);this.context_.return(b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.throw_=function(b){this.context_.start_();if(this.context_.yieldAllIterator_)return this.yieldAllStep_(this.context_.yieldAllIterator_["throw"],b,this.context_.next_);this.context_.throw_(b);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.yieldAllStep_=function(b,a,d){try{var c=b.call(this.context_.yieldAllIterator_,a);$jscomp.generator.ensureIteratorResultIsObject_(c);if(!c.done)return this.context_.stop_(),c;var f=c.value}catch(e){return this.context_.yieldAllIterator_=null,this.context_.throw_(e),this.nextStep_()}this.context_.yieldAllIterator_=null;d.call(this.context_,f);return this.nextStep_()};
$jscomp.generator.Engine_.prototype.nextStep_=function(){for(;this.context_.nextAddress;)try{var b=this.program_(this.context_);if(b)return this.context_.stop_(),{value:b.value,done:!1}}catch(a){this.context_.yieldResult=void 0,this.context_.throw_(a)}this.context_.stop_();if(this.context_.abruptCompletion_){b=this.context_.abruptCompletion_;this.context_.abruptCompletion_=null;if(b.isException)throw b.exception;return{value:b.return,done:!0}}return{value:void 0,done:!0}};
$jscomp.generator.Generator_=function(b){this.next=function(a){return b.next_(a)};this.throw=function(a){return b.throw_(a)};this.return=function(a){return b.return_(a)};$jscomp.initSymbolIterator();this[Symbol.iterator]=function(){return this}};$jscomp.generator.createGenerator=function(b,a){a=new $jscomp.generator.Generator_(new $jscomp.generator.Engine_(a));$jscomp.setPrototypeOf&&$jscomp.setPrototypeOf(a,b.prototype);return a};
$jscomp.polyfill=function(b,a,d,c){if(a){d=$jscomp.global;b=b.split(".");for(c=0;c<b.length-1;c++){var f=b[c];f in d||(d[f]={});d=d[f]}b=b[b.length-1];c=d[b];a=a(c);a!=c&&null!=a&&$jscomp.defineProperty(d,b,{configurable:!0,writable:!0,value:a})}};$jscomp.FORCE_POLYFILL_PROMISE=!1;
$jscomp.polyfill("Promise",function(b){function a(){this.batch_=null}function d(a){return a instanceof f?a:new f(function(c,b){c(a)})}if(b&&!$jscomp.FORCE_POLYFILL_PROMISE)return b;a.prototype.asyncExecute=function(a){null==this.batch_&&(this.batch_=[],this.asyncExecuteBatch_());this.batch_.push(a);return this};a.prototype.asyncExecuteBatch_=function(){var a=this;this.asyncExecuteFunction(function(){a.executeBatch_()})};var c=$jscomp.global.setTimeout;a.prototype.asyncExecuteFunction=function(a){c(a,
0)};a.prototype.executeBatch_=function(){for(;this.batch_&&this.batch_.length;){var a=this.batch_;this.batch_=[];for(var c=0;c<a.length;++c){var b=a[c];a[c]=null;try{b()}catch(h){this.asyncThrow_(h)}}}this.batch_=null};a.prototype.asyncThrow_=function(a){this.asyncExecuteFunction(function(){throw a;})};var f=function(a){this.state_=0;this.result_=void 0;this.onSettledCallbacks_=[];var c=this.createResolveAndReject_();try{a(c.resolve,c.reject)}catch(l){c.reject(l)}};f.prototype.createResolveAndReject_=
function(){function a(a){return function(d){b||(b=!0,a.call(c,d))}}var c=this,b=!1;return{resolve:a(this.resolveTo_),reject:a(this.reject_)}};f.prototype.resolveTo_=function(a){if(a===this)this.reject_(new TypeError("A Promise cannot resolve to itself"));else if(a instanceof f)this.settleSameAsPromise_(a);else{a:switch(typeof a){case "object":var c=null!=a;break a;case "function":c=!0;break a;default:c=!1}c?this.resolveToNonPromiseObj_(a):this.fulfill_(a)}};f.prototype.resolveToNonPromiseObj_=function(a){var c=
void 0;try{c=a.then}catch(l){this.reject_(l);return}"function"==typeof c?this.settleSameAsThenable_(c,a):this.fulfill_(a)};f.prototype.reject_=function(a){this.settle_(2,a)};f.prototype.fulfill_=function(a){this.settle_(1,a)};f.prototype.settle_=function(a,c){if(0!=this.state_)throw Error("Cannot settle("+a+", "+c+"): Promise already settled in state"+this.state_);this.state_=a;this.result_=c;this.executeOnSettledCallbacks_()};f.prototype.executeOnSettledCallbacks_=function(){if(null!=this.onSettledCallbacks_){for(var a=
0;a<this.onSettledCallbacks_.length;++a)e.asyncExecute(this.onSettledCallbacks_[a]);this.onSettledCallbacks_=null}};var e=new a;f.prototype.settleSameAsPromise_=function(a){var c=this.createResolveAndReject_();a.callWhenSettled_(c.resolve,c.reject)};f.prototype.settleSameAsThenable_=function(a,c){var b=this.createResolveAndReject_();try{a.call(c,b.resolve,b.reject)}catch(h){b.reject(h)}};f.prototype.then=function(a,c){function b(a,c){return"function"==typeof a?function(c){try{d(a(c))}catch(q){e(q)}}:
c}var d,e,g=new f(function(a,c){d=a;e=c});this.callWhenSettled_(b(a,d),b(c,e));return g};f.prototype.catch=function(a){return this.then(void 0,a)};f.prototype.callWhenSettled_=function(a,c){function b(){switch(d.state_){case 1:a(d.result_);break;case 2:c(d.result_);break;default:throw Error("Unexpected state: "+d.state_);}}var d=this;null==this.onSettledCallbacks_?e.asyncExecute(b):this.onSettledCallbacks_.push(b)};f.resolve=d;f.reject=function(a){return new f(function(c,b){b(a)})};f.race=function(a){return new f(function(c,
b){for(var f=$jscomp.makeIterator(a),e=f.next();!e.done;e=f.next())d(e.value).callWhenSettled_(c,b)})};f.all=function(a){var c=$jscomp.makeIterator(a),b=c.next();return b.done?d([]):new f(function(a,f){function e(c){return function(b){g[c]=b;h--;0==h&&a(g)}}var g=[],h=0;do g.push(void 0),h++,d(b.value).callWhenSettled_(e(g.length-1),f),b=c.next();while(!b.done)})};return f},"es6","es3");
$jscomp.checkStringArgs=function(b,a,d){if(null==b)throw new TypeError("The 'this' value for String.prototype."+d+" must not be null or undefined");if(a instanceof RegExp)throw new TypeError("First argument to String.prototype."+d+" must not be a regular expression");return b+""};
$jscomp.polyfill("String.prototype.repeat",function(b){return b?b:function(a){var b=$jscomp.checkStringArgs(this,null,"repeat");if(0>a||1342177279<a)throw new RangeError("Invalid count value");a|=0;for(var c="";a;)if(a&1&&(c+=b),a>>>=1)b+=b;return c}},"es6","es3");
$jscomp.polyfill("String.prototype.startsWith",function(b){return b?b:function(a,b){var c=$jscomp.checkStringArgs(this,a,"startsWith");a+="";var d=c.length,e=a.length;b=Math.max(0,Math.min(b|0,c.length));for(var g=0;g<e&&b<d;)if(c[b++]!=a[g++])return!1;return g>=e}},"es6","es3");
$jscomp.iteratorFromArray=function(b,a){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var d=0,c={next:function(){if(d<b.length){var f=d++;return{value:a(f,b[f]),done:!1}}c.next=function(){return{done:!0,value:void 0}};return c.next()}};c[Symbol.iterator]=function(){return c};return c};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(a){return a})}},"es6","es3");
var __awaiter=this&&this.__awaiter||function(b,a,d,c){return new (d||(d=Promise))(function(f,e){function g(a){try{l(c.next(a))}catch(m){e(m)}}function k(a){try{l(c["throw"](a))}catch(m){e(m)}}function l(a){a.done?f(a.value):(new d(function(c){c(a.value)})).then(g,k)}l((c=c.apply(b,a||[])).next())})},apps;
(function(b){function a(){return __awaiter(this,void 0,void 0,function f(){return $jscomp.generator.createGenerator(f,function(a){desktop.showToastMessage("Please run from webview2 application!","Web app error","warning");a.jumpToEnd()})})}try{var d=window.chrome.webview.hostObjects.gcmodeller}catch(c){d={getUniprotXmlDatabase:a,scanDatabase:a,openEnrichmentPage:a,sendPost:a}}b.gcmodeller=d;b.run=function(){Router.AddAppHandler(new pages.applets);Router.AddAppHandler(new pages.enrichment_database);
Router.AddAppHandler(new pages.enrichment_analysis);Router.AddAppHandler(new pages.dataEmbedding);Router.AddAppHandler(new pages.runPLAS);Router.RunApp()}})(apps||(apps={}));$ts.mode=Modes.debug;$ts(apps.run);var desktop;
(function(b){(function(a){a.RSharpErrorMessage=function(a){var c="R# Error:",b=1;if("string"==typeof a.Message)c=c+"&nbsp;"+a.Message.replace(/[<]/ig,"&lt;");else{c+="<br/><br/>";for(var d=$jscomp.makeIterator(a.Message),g=d.next();!g.done;g=d.next())g=g.value,c+="&nbsp;&nbsp;"+b++ +"."+g.replace(/[<]/ig,"&lt;")+"<br/>"}c=c+"<br/>"+("&nbsp;&nbsp;&nbsp;"+a.Source.replace(/[<]/ig,"&lt;")+"<br/>");c+="&nbsp;&nbsp;&nbsp;"+"~".repeat(a.Source.length)+"<br/>";c+="<br/>";a=$jscomp.makeIterator(a.StackTrace);
for(b=a.next();!b.done;b=a.next())d=b.value,b=d.Method.Namespace+"."+d.Method.Module+"."+d.Method.Method,b=b+" at "+d.File+" line "+d.Line,c+=b.replace(/[<]/ig,"&lt;")+"<br />";return c};a.isRSharpError=function(a){var c=TypeScript.Reflection.$typeof(a);return $ts(["Message","Source","TypeFullName","StackTrace"]).All(function(a){return-1<c.property.indexOf(a)})}})(b.RSharp||(b.RSharp={}))})(desktop||(desktop={}));
(function(b){b.promiseAsyncCallback=function(a,d){return __awaiter(this,void 0,void 0,function f(){return $jscomp.generator.createGenerator(f,function(f){b.parseMessage(a).then(function(f){b.parseResultFlag(a,f).then(function(a){d(a,f)})});f.jumpToEnd()})})}})(desktop||(desktop={}));
(function(b){b.now=function(){return(new Date).toLocaleTimeString()};b.parseResultFlag=function(a,b){return __awaiter(this,void 0,void 0,function f(){var d,g;return $jscomp.generator.createGenerator(f,function(f){if(1==f.nextAddress)return f.yield(a.result,2);g=(d=f.yieldResult)&&0==b.code;return f.return(g)})})};b.parseMessage=function(a){return __awaiter(this,void 0,void 0,function c(){var b,e;return $jscomp.generator.createGenerator(c,function(c){if(1==c.nextAddress)return c.yield(a.data,2);b=
c.yieldResult;if($ts.csv.isTsvFile(b))e={code:0,info:b};else if(b.startsWith("data:"))e={code:0,info:b};else try{e=JSON.parse(b)}catch(k){e={code:500,info:b}}return c.return(e)})})};b.processHtmlMsg=function(a){"string"==typeof a?(a=a.replace(/[<]/ig,"&lt;"),a=Strings.lineTokens(a).join("<br />")):a=b.RSharp.isRSharpError(a)?b.RSharp.RSharpErrorMessage(a):"Unhandle error!";return a}})(desktop||(desktop={}));
(function(b){function a(a,f,e,g,k){f=void 0===f?"Task Error":f;e=void 0===e?"":e;g=void 0===g?"danger":g;return $ts("<div>",{class:["toast","show","fade","toast-"+g],role:"alert","aria-live":"assertive","aria-atomic":"true","data-mdb-color":g,"data-mdb-autohide":(void 0===k?!0:k).toString(),style:"width: 500px;"}).display('        \n            <div class="toast-header toast-'+g+'">\n                <i class="'+d[g]+'"></i>\n                <strong class="me-auto">'+f+"</strong>\n                <small>"+
(e&&"null"!=e.toLowerCase()?e:"")+'</small>\n                <button type="button" class="btn-close" data-mdb-dismiss="toast" aria-label="Close">\n                </button>\n            </div>\n            <div class="toast-body">'+b.processHtmlMsg(a)+"</div>\n        ")}b.showToastMessage=function(c,d,e,g){d=void 0===d?"Task Error":d;e=void 0===e?"info":e;g=void 0===g?!0:g;$ts("#busy-indicator").hide();$ts("#toast-message").appendElement(a(c,d,b.now(),e,g))};var d={success:"fas fa-check fa-lg me-2",
danger:"fas fa-exclamation-circle fa-lg me-2",warning:"fas fa-exclamation-triangle fa-lg me-2",info:"fas fa-info-circle fa-lg me-2"}})(desktop||(desktop={}));var js_plot;
(function(b){var a=function(a){this.option={};this.myChart=echarts.init(document.getElementById(void 0===a?"Rplot_js":a),null,{renderer:"canvas",useDirtyRect:!1});this.option&&this.myChart.setOption(this.option)};a.prototype.plot=function(a,c){this.option={grid3D:{},xAxis3D:{},yAxis3D:{},zAxis3D:{},dataset:{dimensions:["","dim1","dim2","dim3"],source:a},series:[{type:"scatter3D",symbolSize:void 0===c?30:c,encode:{x:"dim1",y:"dim2",z:"dim3",tooltip:[0,1,2,3]}}]};this.myChart.setOption(this.option);
window.addEventListener("resize",this.myChart.resize)};b.scatter3d=a})(js_plot||(js_plot={}));var pages;(function(b){var a=function(a){return Bootstrap.apply(this,arguments)||this};$jscomp.inherits(a,Bootstrap);a.prototype.generateSsid=function(a){a=JSON.stringify(a);a=desktop.now()+"-"+a+"-"+this.appName;return md5(a)};b.analysis_session=a})(pages||(pages={}));
(function(b){var a=function(a){return Bootstrap.apply(this,arguments)||this};$jscomp.inherits(a,Bootstrap);a.prototype.init=function(){b.background.run()};$jscomp.global.Object.defineProperties(a.prototype,{appName:{configurable:!0,enumerable:!0,get:function(){return"applets"}}});b.applets=a})(pages||(pages={}));
(function(b){var a=function(a){return Bootstrap.apply(this,arguments)||this};$jscomp.inherits(a,Bootstrap);a.prototype.init=function(){this.scanDatabaseList()};a.prototype.scanDatabaseList=function(){var a=this;$ts("#busy-indicator").show();apps.gcmodeller.scanDatabase().then(function(c){return __awaiter(this,void 0,void 0,function e(){var b;return $jscomp.generator.createGenerator(e,function(d){if(1==d.nextAddress)return d.yield(c,2);b=d.yieldResult;a.showDatabaseList(b);d.jumpToEnd()})})})};a.prototype.showDatabaseList=
function(b){b=JSON.parse(b||"[]");var c=Object.keys(b).length,d=$ts("#repository"),e={},g;for(g in b){e.$jscomp$loop$prop$key$7$12=g;e.$jscomp$loop$prop$metadata$13=b[e.$jscomp$loop$prop$key$7$12];var k=a.buildDbCard(e.$jscomp$loop$prop$key$7$12,e.$jscomp$loop$prop$metadata$13);d.appendElement(k);console.log(e.$jscomp$loop$prop$key$7$12);$ts("#"+e.$jscomp$loop$prop$key$7$12).onclick=function(a){return function(){apps.gcmodeller.openEnrichmentPage(a.$jscomp$loop$prop$key$7$12,a.$jscomp$loop$prop$metadata$13.name,
a.$jscomp$loop$prop$metadata$13.note)}}(e);$ts("#"+e.$jscomp$loop$prop$key$7$12+"-meta").onclick=function(b){return function(){$ts("#busy-indicator").show();a.showMetadata(b.$jscomp$loop$prop$key$7$12,b.$jscomp$loop$prop$metadata$13)}}(e);e={$jscomp$loop$prop$key$7$12:e.$jscomp$loop$prop$key$7$12,$jscomp$loop$prop$metadata$13:e.$jscomp$loop$prop$metadata$13}}$ts("#busy-indicator").hide();desktop.showToastMessage("Found "+c+" database.","Enrichment Database Repository","info")};a.showMetadata=function(b,
c){var d="",e=JSON.stringify({guid:b});d+='<span class="badge badge-primary">Database Name</span>: '+c.name+"("+b+")<br />";d+='<span class="badge badge-primary">Note</span>: <p class="note note-light">'+c.note+"</p><br />";apps.gcmodeller.sendPost($ts.url("@web_invoke_inspector"),e).then(function(b){return __awaiter(this,void 0,void 0,function l(){return $jscomp.generator.createGenerator(l,function(c){desktop.promiseAsyncCallback(b,function(b,c){a.displayDatabaseContentSummary(d,b,c)});c.jumpToEnd()})})})};
a.displayDatabaseContentSummary=function(b,c,f){var d=c?"Load Database Success":"Load Database Error",g=f.info,k=null;console.log(g);if(c){var l=$from(Object.keys(g.summary)).Select(function(a){return{name:a,info:g.summary[a]}}).Where(function(a){return 0<a.info.unique_size}).Where(function(a){return 1<a.info.unique_size/a.info.clusters});c=l.Select(function(b){return a.summaryLine(b.name,b.info)}).JoinBy("");desktop.showToastMessage("Success!",d,"success");k=function(){for(var b={},c=$jscomp.makeIterator(l.ToArray()),
d=c.next();!d.done;b={$jscomp$loop$prop$name$15:b.$jscomp$loop$prop$name$15,$jscomp$loop$prop$model$16:b.$jscomp$loop$prop$model$16},d=c.next())b.$jscomp$loop$prop$model$16=d.value,b.$jscomp$loop$prop$name$15=b.$jscomp$loop$prop$model$16.name,d="#model-"+b.$jscomp$loop$prop$name$15,console.log(d),$ts(d).onclick=function(b){return function(){$ts("#busy-indicator").show();console.log("view background model: "+b.$jscomp$loop$prop$name$15+"...");a.viewModel(key,b.$jscomp$loop$prop$name$15,b.$jscomp$loop$prop$model$16.info)}}(b)};
b+='<span class="badge badge-primary">Protein Counts</span>: '+g.counts+"<br />";b+='<span class="badge badge-primary">Models</span>: '+l.Count+"<br />";b+='<span class="badge badge-primary">Backgrounds</span>: <br /><br />\n                        <ul class="list-group list-group-light">\n                            '+c+"\n                        </ul>\n                    "}else desktop.showToastMessage(f.info,d,"danger");$ts("#summary-info").display(b);isNullOrUndefined(k)||k()};a.viewModel=function(a,
b,f){a=JSON.stringify({guid:a,xref:b});apps.gcmodeller.sendPost($ts.url("@web_invoke_loadModel"),a).then(function(a){return __awaiter(this,void 0,void 0,function k(){return $jscomp.generator.createGenerator(k,function(b){desktop.parseMessage(a).then(function(b){desktop.parseResultFlag(a,b).then(function(a){if(a){var c=new bootstrap.Modal($ts("#view-background"),{keyboard:!1}),d=b.info.clusters;a=Object.keys(d);a=$from(a).Select(function(a){return'\n                                    <li>                                   \n                                            <a \n                                            href="#" \n                                            onclick="pages.enrichment_database.showProteins(\''+
d[a].join(",")+'\')">\n                                            <i class="far fa-file-code"></i>&nbsp;&nbsp;'+a.replace(/[<]/ig,"&lt;")+"\n                                            ["+d[a].length+" proteins]\n                                        </a>                                     \n                                    </li>                              \n                                    "});$ts("#contentArea").clear();$ts("#contentArea").display(a.JoinBy(""));$ts("#busy-indicator").hide();
$ts("#modal-close1").onclick=function(){return c.hide()};$ts("#modal-close2").onclick=function(){return c.hide()};c.show()}else desktop.showToastMessage(b.info,"Load Model Error","danger")})});b.jumpToEnd()})})})};a.showProteins=function(a){$ts("#protein_ids").CType().value=a.replace(/,/ig,"\n")};a.summaryLine=function(a,b){return'<li class="list-group-item d-flex justify-content-between align-items-center">\n                        <div class="d-flex align-items-center">\n                            <span class="badge rounded-pill badge-success">                \n                                <i class="fab fa-laravel"></i>&nbsp;'+
a+"              \n                            </span>\n                            "+b.clusters+" / "+b.unique_size+'\n                        </div>\n                        <a id="model-'+a+'" class="btn btn-link btn-rounded btn-sm" href="#" role="button">View</a>\n                    </li>'};a.buildDbCard=function(a,b){return $ts("<div>",{class:["card","shadow-5"],style:"width: 300px;"}).display(' \n                <div class="bg-image hover-overlay ripple hover-zoom" data-mdb-ripple-color="light">\n                    <img src="/assets/images/background.jpg" class="img-fluid hover-shadow"/>\n                    <a href="javascript:void(0);" id="'+
a+'-meta">\n                        <div class="mask" style="background-color: rgba(251, 251, 251, 0.15);"></div>\n                    </a>\n                </div>\n                <div class="card-body">\n                    <h5 class="card-title">'+b.name+'</h5>\n                    <p class="card-text">'+b.note+'</p>\n                    <a id="'+a+'" href="javascript:void(0);" class="btn btn-primary">Run</a>\n                </div>\n            ')};a.prototype.open_uniprot_onclick=function(){var a=
$ts("#formFile").CType();apps.gcmodeller.getUniprotXmlDatabase().then(function(b){return __awaiter(this,void 0,void 0,function e(){var c;return $jscomp.generator.createGenerator(e,function(d){if(1==d.nextAddress)return c=a,d.yield(b,2);c.value=d.yieldResult;d.jumpToEnd()})})})};a.prototype.imports_onclick=function(){$ts("#busy-indicator").show();var a={file:$ts.value("#formFile"),name:$ts.value("#title"),note:$ts.value("#description")};a=JSON.stringify(a);apps.gcmodeller.sendPost($ts.url("@web_invoke_imports"),
a).then(function(a){return __awaiter(this,void 0,void 0,function e(){return $jscomp.generator.createGenerator(e,function(b){desktop.promiseAsyncCallback(a,function(a,b){var c=a?"Imports Task Success":"Imports Task Error";a?desktop.showToastMessage(b.info,c,"success"):desktop.showToastMessage(b.info,c,"danger");$ts("#busy-indicator").hide()});b.jumpToEnd()})})})};$jscomp.global.Object.defineProperties(a.prototype,{appName:{configurable:!0,enumerable:!0,get:function(){return"enrichment_database"}}});
b.enrichment_database=a})(pages||(pages={}));
(function(b){var a=function(a){return b.analysis_session.apply(this,arguments)||this};$jscomp.inherits(a,b.analysis_session);a.prototype.init=function(){};a.prototype.button_open_click=function(){var a=$ts("#matrix-file").CType(),b=$ts("#busy-indicator");b.show();apps.gcmodeller.getFileOpen("Excel Matrix(*.csv)|*.csv").then(function(c){return __awaiter(this,void 0,void 0,function g(){var d;return $jscomp.generator.createGenerator(g,function(f){if(1==f.nextAddress)return d=a,f.yield(c,2);d.value=f.yieldResult;
b.hide();f.jumpToEnd()})})})};a.prototype.run_click=function(){$ts("#busy-indicator").show();var d=$ts.value("#matrix-file"),c=$ts.value("#dimensions"),f=$ts.select.getOption("#algorithm"),e=b.analysis_session.prototype.generateSsid.call(this,{file:d,dims:c,algo:f}),g=$ts("#z-score").CType().checked;c=JSON.stringify({file:d,ssid:e,dims:c,algorithm:f,z_score:g});var k=this;Strings.Empty(d)?desktop.showToastMessage("The matrix data input file can not be nothing!","Data Embedding Analysis","danger"):
apps.gcmodeller.sendPost($ts.url("@web_invoke_embedding"),c).then(function(b){return __awaiter(this,void 0,void 0,function m(){return $jscomp.generator.createGenerator(m,function(c){desktop.promiseAsyncCallback(b,function(b,c){b?(b=$ts.csv(c.info,!0).Objects().Take(10),k.session_id=e,$ts("#embedding-table").clear(),$ts.appendTable(b,"#embedding-table",null,{class:["table","table-sm"]}),a.plot3DScatter(e),desktop.showToastMessage("Run Data Embedding Analysis Success!",f+" Task Success","success")):
desktop.showToastMessage(c.info,f+" Task Error","danger")});c.jumpToEnd()})})})};a.plot3DScatter=function(a){a=JSON.stringify({ssid:a,k:$ts.value("#kmeans")});apps.gcmodeller.sendPost($ts.url("@web_invoke_Rplot"),a).then(function(a){desktop.promiseAsyncCallback(a,function(a,b){a?(a=b.info+"?refresh="+md5(desktop.now()),$ts("#Rplot-box").CType().href=a,$ts("#Rplot_js").CType().src=a,$ts.goto("#example-3-collapsible"),$ts("#busy-indicator").hide()):desktop.showToastMessage(b.info,"Rplot Error","danger")})})};
a.prototype.refresh_Rplot_click=function(){$ts("#busy-indicator").show();Strings.Empty(this.session_id)?desktop.showToastMessage("Data session id can not be nothing!","Rplot Error","danger"):a.plot3DScatter(this.session_id)};a.prototype.save_project_click=function(){desktop.showToastMessage("You should run this analysis from a data analysis project","Report Error","danger")};a.prototype.download_zip_click=function(){var a=$ts.url("@web_invoke_zip"),b=JSON.stringify({ssid:this.session_id});$ts("#busy-indicator").show();
Strings.Empty(this.session_id)?desktop.showToastMessage("Data session id can not be nothing!","Report Error","danger"):apps.gcmodeller.sendPost(a,b).then(function(a){return __awaiter(this,void 0,void 0,function g(){return $jscomp.generator.createGenerator(g,function(b){desktop.promiseAsyncCallback(a,function(a,b){a?window.open(b.info,"newW","\n                                height=500, width=800, top=100, left=100, toolbar=no, \n                                menubar=no,\n                                scrollbars=no,resizable=no, location=no, \n                                status=no"):
desktop.showToastMessage(b.info,"Report Error","danger");$ts("#download-group").show();$ts("#busy-indicator").hide()});b.jumpToEnd()})})})};$jscomp.global.Object.defineProperties(a.prototype,{appName:{configurable:!0,enumerable:!0,get:function(){return"dataEmbedding"}}});b.dataEmbedding=a})(pages||(pages={}));
(function(b){var a=function(a){return b.analysis_session.apply(this,arguments)||this};$jscomp.inherits(a,b.analysis_session);a.prototype.init=function(){var a=this;$ts.location.hasQueryArguments&&(this.database=$ts.location("id"));console.log($ts.location);$ts("#busy-indicator").hide();$ts("#background").onchange=function(){a.background_onchange($ts.select.getOption("#background"))}};a.prototype.background_onchange=function(b){var c=a.note_mapping[b],d;for(d in a.note_mapping)$ts("#"+a.note_mapping[d]).hide();
console.log("show about '"+b+" -> "+c+"'!");$ts("#"+c).show()};a.prototype.run_onclick=function(){if(Strings.Empty(this.database))desktop.showToastMessage("Please select a database at first!","Enrichment Analysis","danger");else{$ts("#busy-indicator").show();var a=$ts.select.getOption("#background"),b=$ts.value("#input_idlist");Strings.Empty(a)?desktop.showToastMessage("Please select a background for enrichment analysis at first!","Enrichment Analysis","danger"):Strings.Empty(b)?desktop.showToastMessage("No gene/protein id list to run enrichment analysis!",
"Enrichment Analysis","danger"):this.runInternal(a,b)}};a.term_url=function(a){switch(a){case "keyword":return function(a){return'<a target="__blank" href="https://www.uniprot.org/keywords/'+a[""]+'">'+a.name+"</a>"};case "GO":return function(a){return'<a target="__blank" href="http://amigo.geneontology.org/amigo/term/'+a[""]+'">'+a.name+"</a>"};case "Pfam":return function(a){return'<a target="__blank" href="https://www.ebi.ac.uk/interpro/entry/pfam/'+a[""]+'/">'+a.name+"</a>"};case "InterPro":return function(a){return'<a target="__blank" href="https://www.ebi.ac.uk/interpro/entry/InterPro/'+
a[""]+'/">'+a.name+"</a>"};case "EC":return function(a){return'<a target="__blank" href="https://www.genome.jp/dbget-bin/www_bfind_sub?mode=bfind&max_hit=1000&dbkey=enzyme&keywords='+a[""]+'">'+a.name+"</a>"};default:return function(a){return a.name}}};a.prototype.runInternal=function(d,c){var f=b.analysis_session.prototype.generateSsid.call(this,{type:d,symbols:c}),e=this;c=JSON.stringify({id:this.database,background:d,symbols:Strings.lineTokens(c),ssid:f});var g=a.term_url(d);apps.gcmodeller.sendPost($ts.url("@web_invoke_enrichment"),
c).then(function(a){desktop.promiseAsyncCallback(a,function(a,b){var c=a?"Run Enrichment Success":"Analysis Error",d=b.info;console.log(d);a?(a=$ts.csv(d,!0).Objects().Where(function(a){return.05>a.pvalue}).Select(function(a){a.name=g(a);return a}),$ts("#enrichment-result-table").clear(),$ts.appendTable(a,"#enrichment-result-table",null,{class:["table","table-sm"]}),e.session_id=f,e.plot_onclick(),desktop.showToastMessage("Success!",c,"success")):desktop.showToastMessage(b.info,c,"danger")})})};a.prototype.plot_onclick=
function(){$ts("#busy-indicator").show();var a=JSON.stringify({session_id:this.session_id,type:"bar",background:$ts.select.getOption("#background"),top:5});apps.gcmodeller.sendPost($ts.url("@web_invoke_Rplot?base64=true"),a).then(function(a){return __awaiter(this,void 0,void 0,function e(){return $jscomp.generator.createGenerator(e,function(b){desktop.parseMessage(a).then(function(b){desktop.parseResultFlag(a,b).then(function(a){var c=a?"Run Enrichment Success":"Analysis Error",d=b.info;console.log(d);
a?($ts("#Rplot").CType().src=d,$ts("#Rplot-box").CType().href=d,$ts("#busy-indicator").hide()):desktop.showToastMessage(b.info,c,"danger")})});b.jumpToEnd()})})})};$jscomp.global.Object.defineProperties(a.prototype,{appName:{configurable:!0,enumerable:!0,get:function(){return"enrichment_analysis"}}});a.note_mapping={GO:"go_note",keyword:"uniprot_note",Pfam:"pfam_note",InterPro:"interpro_note",EC:"ec_note",eggNOG:"eggnog_note"};b.enrichment_analysis=a})(pages||(pages={}));
(function(b){var a=function(a){return b.analysis_session.apply(this,arguments)||this};$jscomp.inherits(a,b.analysis_session);a.prototype.init=function(){this.add_equation_click()};a.prototype.loadDemo_click=function(){$ts.value("#time_final","30");$ts.value("#resolution","100");$ts("#equations").clear();$ts("#constant-list").clear();for(var a=$jscomp.makeIterator([["x1=beta1*(lamda1*(1+alpha1*(x4^n1)/(1+x4^n1))-x1)",-10],["x2=x1-x2",-10],["x3=beta3*(lamda3*(1+alpha2*((x4/a)^n2)/(1+(x4/a)^n2))*(1/(1+x2^n3))-x3)",
0],["x4=beta4*(x3-x4)",10]]),b=a.next();!b.done;b=a.next()){b=b.value;var f=this.add_equation_click();f.eq.value=b[0].toString();f.y0.value=b[1].toString()}a=$jscomp.makeIterator([["beta1","30"],["beta3","30"],["beta4","1"],["lamda1","2"],["lamda3","2"],["alpha1","20"],["alpha2","20"],["alpha3","1"],["a","1"],["n1","4"],["n2","5"],["n3","1"]]);for(b=a.next();!b.done;b=a.next())b=b.value,f=this.add_constant_click(),f.name.value=b[0].toString(),f.val.value=b[1].toString();this.equationIndexing($ts(".eq-index"));
this.equationIndexing($ts(".const-index"));desktop.showToastMessage("Load 'Atkinson.txt' demo example success!","PLAS Script","info")};a.prototype.add_equation_click=function(){var a=$ts("#equations"),b=$ts("<div>",{class:["input-group","mb-3","equation"]}).display('\n                <span class="input-group-text eq-index">1. </span>\n                <input type="text" class="form-control" placeholder="y=f(x) at here"\n                    aria-label="ode">\n                <span class="input-group-text">, y<sub>0</sub>=</span>\n                <input type="text" class="form-control"\n                    placeholder="Initial value of variable y" aria-label="y0">\n                <button class="btn btn-danger del-eq" type="button"> Remove\n                </button>\n            '),
f=this,e=b.getElementsByTagName("input"),g=e.item(0);e=e.item(1);a.appendElement(b);$ts(".del-eq").onClick(function(b){b.removeAttribute("onclick");a.removeChild(b.parentElement);f.equationIndexing($ts(".eq-index"))});f.equationIndexing($ts(".eq-index"));return{eq:g,y0:e}};a.prototype.equationIndexing=function(a){a.ForEach(function(a,b){a.innerText=b+1+". "})};a.prototype.add_constant_click=function(){var a=$ts("#constant-list"),b=$ts("<div>",{class:["input-group","mb-3","const"]}).display('\n                <span class="input-group-text const-index">1. </span>\n                <input type="text" class="form-control" placeholder="put constant symbol name at here"\n                    aria-label="constant">\n                <span class="input-group-text">, constant value=</span>\n                <input type="text" class="form-control"\n                    placeholder="Constant value of current symbol" aria-label="const_val">\n                <button class="btn btn-danger del-const" type="button"> Remove\n                </button>\n            '),
f=this,e=b.getElementsByTagName("input"),g=e.item(0);e=e.item(1);a.appendElement(b);$ts(".del-const").onClick(function(b){b.removeAttribute("onclick");a.removeChild(b.parentElement);f.equationIndexing($ts(".const-index"))});f.equationIndexing($ts(".const-index"));return{name:g,val:e}};a.loadContents=function(a){a=$ts("."+a);var b=[];a.ForEach(function(a){var c=a.getElementsByTagName("input");a=c.item(0);c=c.item(1);a={target:a.value,value:c.value};Strings.Empty(a.target)||b.push(a)});b.length!=a.Count&&
desktop.showToastMessage("Some data is leaves empty, you can removes these empty data slots.","Check PLAS Parameters","warning");return b};a.prototype.run_click=function(){var d=this;$ts("#busy-indicator").show();var c=a.loadContents("equation"),f=a.loadContents("const"),e=$ts.value("#time_final"),g=$ts.value("#resolution");if(0==c.length)desktop.showToastMessage("No ODEs system equations!","Check PLAS Parameters","danger");else{var k=b.analysis_session.prototype.generateSsid.call(this,{sys:c,const:f,
t:e,resolution:g});c=JSON.stringify({odes:JSON.stringify(c),constants:JSON.stringify(f),final_time:e,resolution:g,session_id:k});apps.gcmodeller.sendPost($ts.url("@web_invoke_run_plas"),c).then(function(a){return __awaiter(this,void 0,void 0,function m(){return $jscomp.generator.createGenerator(m,function(b){desktop.promiseAsyncCallback(a,function(a,b){a?(a=$ts.csv(b.info,!0).Objects(),$ts("#plas-table").clear(),$ts.appendTable(a,"#plas-table",null,{class:["table","table-sm"]}),d.session_id=k,d.createPlot(),
desktop.showToastMessage("Run system simulation job done!","Run PLAS","success")):desktop.showToastMessage(b.info,"Run PLAS","danger");$ts("#busy-indicator").hide()});b.jumpToEnd()})})})}};a.prototype.createPlot=function(){var a=JSON.stringify({ssid:this.session_id});apps.gcmodeller.sendPost($ts.url("@web_invoke_Rplot"),a).then(function(a){return __awaiter(this,void 0,void 0,function e(){return $jscomp.generator.createGenerator(e,function(b){desktop.promiseAsyncCallback(a,function(a,b){a?(a=b.info+
"?refresh="+md5(desktop.now()),$ts("#Rplot-box").CType().href=a,$ts("#Rplot_js").CType().src=a,$ts.goto("#example-3"),desktop.showToastMessage("Simulator data rendering job done!","Run PLAS","info")):desktop.showToastMessage(b.info,"Run PLAS","danger")});b.jumpToEnd()})})})};$jscomp.global.Object.defineProperties(a.prototype,{appName:{configurable:!0,enumerable:!0,get:function(){return"plas"}}});b.runPLAS=a})(pages||(pages={}));
(function(b){(function(a){var b=function(a,b,d,g,k,l,h){a=void 0===a?document.createElement("canvas"):a;b=void 0===b?a.getContext("2d"):b;d=void 0===d?{x:null,y:null,max:2E4}:d;g=void 0===g?[0,0]:g;k=void 0===k?[]:k;this.uCanvas=a;this.uContext=b;this.f=d;this.size=g;this.dots=k;this.setting=void 0===l?null:l;this.frameRender=void 0===h?null:h};b.getTag=function(a){return document.getElementsByTagName(a)[0]};b.getById=function(a){return document.getElementById(a)};b.prototype.canvasResize=function(){this.uCanvas.width=
window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;this.uCanvas.height=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;this.size=[this.uCanvas.width,this.uCanvas.height]};b.prototype.update=function(){var a=this,d=[a.f].concat(a.dots),e,g,k;a.uContext.clearRect(0,0,a.size[0],a.size[1]);var l=$jscomp.makeIterator(a.dots);for(e=l.next();!e.done;e=l.next()){var h=e.value;h.x+=h.xa;h.y+=h.ya;h.xa*=h.x>a.size[0]||0>h.x?-1:1;h.ya*=h.y>
a.size[1]||0>h.y?-1:1;a.uContext.fillRect(h.x-.5,h.y-.5,1,1);for(g=0;g<d.length;g++)if(e=d[g],h!==e&&null!==e.x&&null!==e.y){var m=h.x-e.x;var p=h.y-e.y;var n=m*m+p*p;n<e.max&&(e===a.f&&n>=e.max/2&&(h.x-=.03*m,h.y-=.03*p),k=(e.max-n)/e.max,a.uContext.beginPath(),a.uContext.lineWidth=k/2,a.uContext.strokeStyle="rgba("+a.setting.color+", "+(k+.2)+")",a.uContext.moveTo(h.x,h.y),a.uContext.lineTo(e.x,e.y),a.uContext.stroke())}d.splice(d.indexOf(h),1)}b.defaultCallback(function(){return a.update()})};
b.defaultCallback=function(a){window.setTimeout(a,1E3/45);return 0};b.prototype.registerDevice=function(){var a=this;a.frameRender=window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||b.defaultCallback;window.onresize=a.canvasResize;window.onmousemove=function(b){b=b||window.event;a.f.x=b.clientX;a.f.y=b.clientY};window.onmouseout=function(){a.f.x=null;a.f.y=null}};a.network=b;a.run=function(a,
d){a=void 0===a?null:a;d=void 0===d?{canvasId:"canvas-network-display",zIndex:-1,opacity:1,color:"0,104,183",n:100}:d;var c=new b;c.setting=d;c.uCanvas.id="canvas_"+d.canvasId;c.uCanvas.style.cssText="position:fixed; top:0; left:0; z-index: "+d.zIndex+"; opacity: "+d.opacity;a?b.getById(a).appendChild(c.uCanvas):b.getTag("body").appendChild(c.uCanvas);c.canvasResize();c.registerDevice();for(a=0;d.n>a;a++)c.dots.push({x:Math.random()*c.size[0],y:Math.random()*c.size[1],xa:2*Math.random()-1,ya:2*Math.random()-
1,max:1E4});setTimeout(function(){return c.update()},100)}})(b.background||(b.background={}))})(pages||(pages={}));
