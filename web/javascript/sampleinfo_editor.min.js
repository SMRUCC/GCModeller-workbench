var $jscomp=$jscomp||{};$jscomp.scope={};$jscomp.arrayIteratorImpl=function(b){var d=0;return function(){return d<b.length?{done:!1,value:b[d++]}:{done:!0}}};$jscomp.arrayIterator=function(b){return{next:$jscomp.arrayIteratorImpl(b)}};$jscomp.makeIterator=function(b){var d="undefined"!=typeof Symbol&&Symbol.iterator&&b[Symbol.iterator];return d?d.call(b):$jscomp.arrayIterator(b)};$jscomp.arrayFromIterator=function(b){for(var d,a=[];!(d=b.next()).done;)a.push(d.value);return a};
$jscomp.arrayFromIterable=function(b){return b instanceof Array?b:$jscomp.arrayFromIterator($jscomp.makeIterator(b))};$jscomp.getGlobal=function(b){return"undefined"!=typeof window&&window===b?b:"undefined"!=typeof global&&null!=global?global:b};$jscomp.global=$jscomp.getGlobal(this);$jscomp.ASSUME_ES5=!1;$jscomp.ASSUME_NO_NATIVE_MAP=!1;$jscomp.ASSUME_NO_NATIVE_SET=!1;$jscomp.SIMPLE_FROUND_POLYFILL=!1;
$jscomp.defineProperty=$jscomp.ASSUME_ES5||"function"==typeof Object.defineProperties?Object.defineProperty:function(b,d,a){b!=Array.prototype&&b!=Object.prototype&&(b[d]=a.value)};$jscomp.SYMBOL_PREFIX="jscomp_symbol_";$jscomp.initSymbol=function(){$jscomp.initSymbol=function(){};$jscomp.global.Symbol||($jscomp.global.Symbol=$jscomp.Symbol)};$jscomp.Symbol=function(){var b=0;return function(d){return $jscomp.SYMBOL_PREFIX+(d||"")+b++}}();
$jscomp.initSymbolIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.iterator;b||(b=$jscomp.global.Symbol.iterator=$jscomp.global.Symbol("iterator"));"function"!=typeof Array.prototype[b]&&$jscomp.defineProperty(Array.prototype,b,{configurable:!0,writable:!0,value:function(){return $jscomp.iteratorPrototype($jscomp.arrayIteratorImpl(this))}});$jscomp.initSymbolIterator=function(){}};
$jscomp.initSymbolAsyncIterator=function(){$jscomp.initSymbol();var b=$jscomp.global.Symbol.asyncIterator;b||(b=$jscomp.global.Symbol.asyncIterator=$jscomp.global.Symbol("asyncIterator"));$jscomp.initSymbolAsyncIterator=function(){}};$jscomp.iteratorPrototype=function(b){$jscomp.initSymbolIterator();b={next:b};b[$jscomp.global.Symbol.iterator]=function(){return this};return b};
$jscomp.iteratorFromArray=function(b,d){$jscomp.initSymbolIterator();b instanceof String&&(b+="");var a=0,c={next:function(){if(a<b.length){var f=a++;return{value:d(f,b[f]),done:!1}}c.next=function(){return{done:!0,value:void 0}};return c.next()}};c[Symbol.iterator]=function(){return c};return c};
$jscomp.polyfill=function(b,d,a,c){if(d){a=$jscomp.global;b=b.split(".");for(c=0;c<b.length-1;c++){var f=b[c];f in a||(a[f]={});a=a[f]}b=b[b.length-1];c=a[b];d=d(c);d!=c&&null!=d&&$jscomp.defineProperty(a,b,{configurable:!0,writable:!0,value:d})}};$jscomp.polyfill("Array.prototype.keys",function(b){return b?b:function(){return $jscomp.iteratorFromArray(this,function(b){return b})}},"es6","es3");var biodeep;
(function(b){var d=function(){this.labels=[]};d.prototype.add=function(a){this.labels.push(a)};d.prototype.delete=function(a){this.labels=$from(this.labels).Where(function(c){return c!=a}).ToArray(!1)};d.prototype.popall=function(){var a=[].concat($jscomp.arrayFromIterable(this.labels));this.labels=[];return a};$jscomp.global.Object.defineProperties(d.prototype,{n:{configurable:!0,enumerable:!0,get:function(){return this.labels.length}}});b.labelStack=d})(biodeep||(biodeep={}));
(function(b){b.createUI=function(d){var a=$ts("<li>",{class:["firstLi","clearfix"]}).appendElement($ts("<h3>",{class:"cen"}).display("\u6240\u6709\u6837\u672c\u5206\u7ec4")).appendElement($ts("<p>",{class:"attentionLis"}).display("\u5355\u51fb\u9009\u4e2d\uff0c\u518d\u6b21\u5355\u51fb\u53ef\u4ee5\u53d6\u6d88\u9009\u62e9\uff0c<strong><span style='color: red;'>\u6bd4\u5bf9\u65b9\u5f0f\u4f9d\u7167\u70b9\u51fb\u987a\u5e8f\u4ea7\u751f</span></strong>")).appendElement($ts("<div>",{class:"clearfix",id:"all_groups"})),
c=$ts("<li>",{class:"groEnt"}).display($ts("<a>",{href:executeJavaScript,onclick:function(){var c=1<b.labels.n?b.labels.popall():[];d(c)}}).display($ts("<i>",{class:["fa","fa-arrow-right"],"aria-hidden":!0}))),f=$ts("<li>",{class:"lastLi"}).appendElement($ts("<h3>",{class:"cen"}).display("\u5df2\u9009\u7ec4\u522b\u6bd4\u5bf9")).appendElement($ts("<p>",{class:"attentionLis"}).display("\u53ef\u4ee5\u70b9\u51fb<span style='color: red;'>\u7ea2\u8272\u53c9\u53c9</span>\u5220\u9664\u8bef\u6dfb\u52a0\u7684\u6bd4\u5bf9\u4fe1\u606f")).appendElement($ts("<div>",
{class:"clearfix",id:"designs"}));return $ts("<ul>",{class:"groupCount"}).appendElement(a).appendElement(c).appendElement(f)};b.labels=new b.labelStack;b.analysisDesignItem=function(b,a,c){var f=$ts("<div>",{class:["samplegroup-div","clearfix"],"data-target":JSON.stringify(b)}),e=$ts("<div>",{class:"radio-iscurrent"}),g=$ts("<div>",{class:["ui-sortable","clearfix"]}),d=$ts("<a>",{href:executeJavaScript}).display($ts("<i>",{class:["fa","fa-times"],style:"line-height: 52px;color:red;font-size: 20px;"}));
d.onclick=function(){a.removeChild(f);c()};b=$jscomp.makeIterator(b);for(var k=b.next();!k.done;k=b.next())k=k.value,g.appendElement($ts("<div>",{class:["widget_group","ui-sortable-handle"],"data-target":k}).display(k));g.appendChild(d);return f.appendElement(e).appendElement(g)}})(biodeep||(biodeep={}));
(function(b){b.loadStyle=function(){var b=$ts("<style>").display(".widget_group {\n    border-radius: 5px;\n    padding: 5px 30px 5px 20px;\n    margin-bottom: 10px;\n    margin-top: 10px;\n    background-color: #1ea2e9;\n    border: 1px solid #428bca;\n    color: #ffffff;\n    margin-right: 10px;\n    float: left;\n    cursor: pointer;\n    position: relative;\n}\n\ndiv.ui-selected {\n    -webkit-transition: border linear .2s,-webkit-box-shadow linear .5s;\n    border-color: rgba(141,39,142,.75);\n    -webkit-box-shadow: 0 0 18px rgba(111, 1, 32, 1);\n    border: 1px solid red;\n    background-color: #F39814;\n}\n\n.radio-iscurrent {\n    float: left;\n    padding-top: 13px;\n    margin-right: 5px;\n}\n\nul.ui-sortable {\n    float: left;\n}\n.groupCount {\n    display: flex;\n    justify-content: space-between;\n    padding: 0 40px;\n}\n#all_groups {\n    padding: 0 10px;\n}\n.firstLi,\n.lastLi {\n    width: 45%;\n    border: 1px solid #03a9f4;\n}\nh3,p {\n    text-align: center;\n}\n.groEnt {\n    width: 5%;\n    text-align: center;\n    margin-top: 10%;\n}\n.groEnt a {\n    font-size: 36px;\n}\n.samplegroup-div {\n    padding: 0 10px;\n    margin-bottom: 15px;\n}\n.ui-sortable {\n    border: 1px dashed #03a9f4;\n    padding: 0 10px;\n}\n\n");$ts("&head").appendElement(b)}})(biodeep||
(biodeep={}));$ts(biodeep.loadStyle);
function loadDesigner(b,d,a,c){c=void 0===c?null:c;$ts(b).clear().appendElement(biodeep.createUI(biodeep.UI_events.handlerEvent(c)));var f=$ts("#all_groups");b=$ts("#designs");d=$jscomp.makeIterator(d);for(var e=d.next();!e.done;e=d.next())f.appendElement(biodeep.UI_events.doLabeler(e.value));c=isNullOrUndefined(c)?DoNothing:c;f=function(){c(biodeep.UI_events.getCurrentDesigns())};a=$jscomp.makeIterator(a);for(d=a.next();!d.done;d=a.next())d=d.value.group_info,b.appendElement(biodeep.analysisDesignItem(d,
b,f))}
(function(b){(function(d){function a(){b.labels.popall();$ts($ts("#all_groups").getElementsByTagName("div")).Where(function(c){return c.classList.contains("ui-selected")}).ForEach(function(c){return c.classList.remove("ui-selected")})}function c(){return $ts.select(".samplegroup-div").Select(function(c){c=JSON.parse(c.getAttribute("data-target"));return{groups:c.length,group_info:c,label:c.join(" vs ")}}).ToArray(!1)}d.handlerEvent=function(f){f=isNullOrUndefined(f)?DoNothing:f;var e=function(){f(c())};return function(f){if(!(isNullOrEmpty(f)||
2>f.length||(console.log(f),$ts(c()).Any(function(c){var a=$from([].concat($jscomp.arrayFromIterable(c.group_info)).concat([].concat($jscomp.arrayFromIterable(f)))).Distinct();return c.groups==f.length&&f.length==a.Count})))){var g=$ts("#designs");g.appendElement(b.analysisDesignItem(f,g,e));a();e()}}};d.doLabeler=function(c){var a=$ts("<div>",{class:["widget_group"],"data-target":c}).display(c);a.onclick=function(){a.classList.contains("ui-selected")?(a.classList.remove("ui-selected"),b.labels.delete(c)):
(a.classList.add("ui-selected"),b.labels.add(c))};return a};d.getCurrentDesigns=c})(b.UI_events||(b.UI_events={}))})(biodeep||(biodeep={}));
(function(b){function d(a,b,f){var e=$ts("<select>",{onchange:function(){var c=e.value;c=c.match(/\d+/g)[0];f(a,c)}}),g=0,d=0;b=Strings.Empty(b,!0)?"shape0":"shape"+b;for(var h in c)e.appendElement($ts("<option>",{value:h}).display(c[h])),h==b?g=d:++d;b=function(){e.selectedIndex=g};b();m.push(b);return e}var a="#E41A1C #377EB8 #4DAF4A #984EA3 #FF7F00 #FFFF33 #A65628 #F781BF #999999".split(" "),c={shape21:"\u25cf",shape22:"\u25a0",shape23:"\u25c6",shape24:"\u25b2",shape25:"\u25bc",shape1:"\u25cb",
shape0:"\u25a1",shape5:"\u25c7",shape2:"\u25b3",shape6:"\u25bd"},f={},e,g=function(c,b){var h=this;this.sampleMeta=c;var l=$ts("<table>",{class:"table"}),m=$ts("<thead>").appendElement($ts("<tr>").appendElement($ts("<th>").display("\u7ec4\u522b\u540d\u79f0")).appendElement($ts("<th>").display("\u989c\u8272")).appendElement($ts("<th>").display("\u5f62\u72b6"))),p=$ts("<tbody>"),q,r=[],u={},v={},w={};c=$jscomp.makeIterator(c);for(q=c.next();!q.done;q=c.next()){var n=q.value;Strings.Empty(n.color,!0)&&
(n.color="ee3333");Strings.Empty(""+n.shape,!0)&&(n.shape=0);var t="color-"+n.sampleInfo.replace(/\./g,"-");q=$ts("<tr>");q.appendElement($ts("<td>").display(n.sampleInfo));q.appendElement($ts("<td>",{id:t}));q.appendElement($ts("<td>").display(d(n.sampleInfo,n.shape,function(c,a){return h.shapeSetter(c,a)})));r.push(t);u[t]=n.sampleInfo;v[t]=Strings.Empty(n.color,!0)?"#ee3333":"#"+n.color;w[t]=n;p.appendElement(q)}l.appendElement(m).appendElement(p);$ts(b).clear().appendElement(l);b={};r=$jscomp.makeIterator(r);
for(l=r.next();!l.done;b={$jscomp$loop$prop$currentLabel$21$26:b.$jscomp$loop$prop$currentLabel$21$26},l=r.next())p=l.value,b.$jscomp$loop$prop$currentLabel$21$26=g.holdLabel(u[p]),m=uikit.colorPicker.fast("#"+p,a,this.setColor(u[p]),v[p],function(c){return function(){k=c.$jscomp$loop$prop$currentLabel$21$26();console.log("\u8bbe\u7f6e\u66f4\u591a\u7684\u989c\u8272");$ts("#colorBox").show();$ts("#pca2d-settings-panel").show()}}(b)),l=m.color,l=l.replace(/[#]+/g,""),f[u[p]]=m,w[p].color=l;e=this};
g.jqueryColorPickerUI=function(c,a){return $ts("<div>",{style:"width:128px;"}).display($ts("<input>",{style:"width:100px;",id:c,name:c,class:["colorPicker","evo-cp0"],placeholder:a,value:a}))};g.holdLabel=function(c){return function(){return c}};g.prototype.setColor=function(c){var a=this;return function(b){a.colorSetter(c,b.substr(1))}};g.prototype.shapeSetter=function(c,a){$from(this.sampleMeta).Where(function(a){return a.sampleInfo==c}).First.shape=a};g.prototype.colorSetter=function(c,a){var b=
$from(this.sampleMeta).Where(function(a){return a.sampleInfo==c}).First,f=new TypeScript.ColorManager.w3color("#"+a),e=new TypeScript.ColorManager.w3color("rgb("+Math.round(f.red/2)+", "+Math.round(f.green/2)+", "+Math.round(f.blue/2)+")");f=new TypeScript.ColorManager.w3color("rgb("+(255-Math.round(f.red/2))+", "+(255-Math.round(f.green/2))+", "+(255-Math.round(f.blue/2))+")");b.color=a;b.color1=e.toHexString().substr(1);b.color2=f.toHexString().substr(1)};b.metaEditor=g;var m=[];b.reset=function(){for(var c=
$jscomp.makeIterator(m),a=c.next();!a.done;a=c.next())a=a.value,a()};var k;b.setColorValue=function(c){c=c.toHexString();f[k].setDisplayColor(c);e.setColor(k)(c);console.log(c)}})(biodeep||(biodeep={}));
$ts(function(){biodeep.ui.doStyle();biodeep.createInputModal(biodeep.sampleInfoId,"\u8bbe\u7f6e\u5206\u7ec4\u540d\u79f0","\u8bf7\u5728\u8fd9\u91cc\u8f93\u5165\u6837\u672c\u5206\u7ec4\u540d\u79f0");biodeep.createInputModal(biodeep.batchInfoId,"\u8bbe\u7f6e\u5b9e\u9a8c\u6279\u6b21","\u8bf7\u5728\u8fd9\u91cc\u8f93\u5165\u5b9e\u9a8c\u6279\u6b21\u7f16\u53f7");biodeep.createInputModal(biodeep.sample1Id,"\u8bbe\u7f6e\u4e9a\u578b\u5206\u7c7bA","\u8bf7\u5728\u8fd9\u91cc\u8f93\u5165\u4e9a\u578b\u5206\u7c7b\u7f16\u53f7");
biodeep.createInputModal(biodeep.sample2Id,"\u8bbe\u7f6e\u4e9a\u578b\u5206\u7c7bB","\u8bf7\u5728\u8fd9\u91cc\u8f93\u5165\u4e9a\u578b\u5206\u7c7b\u7f16\u53f7")});
(function(b){function d(a,c,b){for(var f=$from(b).Min(function(c){return c.length}).length,g,d=$from(b).Select(function(c){return c.join("")}).ToArray(!1);c<f;c++){g=[];for(var k=$jscomp.makeIterator(b),h=k.next();!h.done;h=k.next())g.push(h.value[c]);g=$from(g).Distinct().ToArray(!1);if(1==g.length)a.push(g[0]);else return a=Strings.RTrim(a.join(""),"-_.+&$#@!`~ "),new NamedValue(a,d)}}b.ensureSampleInfoModel=function(a){var c=$ts.typeof(a);if(c.isArrayOf("string")||c.isEnumerator){a=Array.isArray(a)?
a:a.ToArray(!1);try{var f=b.guess_groupInfo(a)}catch(e){f=[new NamedValue("unknown",a)]}return b.buildModels(f)}f=$jscomp.makeIterator(a);for(c=f.next();!c.done;c=f.next())c=c.value,Strings.Empty(c.sample_info1,!0)&&(c.sample_info1=""),Strings.Empty(c.sample_info2,!0)&&(c.sample_info2="");return a};b.as_tabular=function(a){return $ts.csv.toText(a,!1)};b.buildModels=function(a){var c=[];a=$jscomp.makeIterator(a);for(var b=a.next();!b.done;b=a.next()){b=b.value;for(var e=$jscomp.makeIterator(b.value),
g=e.next();!g.done;g=e.next())g=g.value,c.push({ID:g,sample_name:g,sample_info:b.name,injectionOrder:0,batch:1,color:"000000",shape:19,sample_info1:"",sample_info2:""})}return c};b.guess_groupInfo=function(a){Array.isArray(a)||(a=a.ToArray());for(var c=[],b,e=$from(a).Select(function(c){return Strings.ToCharArray(c,!1)}).ToArray(!1),g=$from(e).Min(function(c){return c.length}).length,m=[],k=0;k<g;k++){a=[];b=$jscomp.makeIterator(e);for(var h=b.next();!h.done;h=b.next())a.push(h.value[k]);b=$from(a).Distinct().ToArray(!1);
if(1==b.length)c.push(b[0]);else{g={};b=$jscomp.makeIterator(b);for(h=b.next();!h.done;g={$jscomp$loop$prop$start$28:g.$jscomp$loop$prop$start$28},h=b.next())g.$jscomp$loop$prop$start$28=h.value,h=$from(a).Select(function(c){return function(a){return a==c.$jscomp$loop$prop$start$28}}(g)).ToArray(!1),h=$from(e).subset(h),h=d([].concat($jscomp.arrayFromIterable(c)),k,h.ToArray(!1)),m.push(h);break}}return m}})(biodeep||(biodeep={}));
(function(b){(function(b){b.doStyle=function(){var a=$ts("&head");isNullOrUndefined($ts("#table-style"))&&a.appendElement($ts("<style>",{id:"table-style"}).display("\n            .selected {\n                background-color: lightBlue;\n            }\n            "));isNullOrUndefined($ts("#context-style"))&&a.appendElement($ts("<style>",{id:"context-style"}).display("\n        .menu {\n            width: 150px;\n            box-shadow: 1px 1px 5px #888888;\n            border-style: solid;\n            border-width: 1px;\n            border-color: grey;\n            border-radius: 2px;\n            padding-left: 5px;\n            padding-right: 5px;\n            padding-top: 3px;\n            padding-bottom: 3px;\n            position: fixed;\n            background-color: white;\n            z-index: 999;\n        }\n\n        .menu-item {\n            height: 20px;\n        }\n\n            .menu-item:hover {\n                background-color: #6CB5FF;\n                cursor: pointer;\n            }\n            "))}})(b.ui||
(b.ui={}))})(biodeep||(biodeep={}));
(function(b){b.sampleInfoId="input-sampleinfo";b.batchInfoId="input-batchinfo";b.sample1Id="input-sample1";b.sample2Id="input-sample2";var d=function(a,c,f,e){e=void 0===e?null:e;this.container=a;this.editMode=!1;c=b.ensureSampleInfoModel(c);isNullOrUndefined(f)&&(f=d.createSampleInfotable);$ts(a).clear();$ts(a).appendElement(d.createContextMenu());$ts(a).appendElement(f(c));this.init(e);this.exitEditMode()};d.prototype.init=function(a){var c=this;document.onselectstart=function(){return!c.editMode};
this.trs=$ts("#sampleinfo").any.tBodies[0].getElementsByTagName("tr");isNullOrUndefined(a)?this.tableTitles=$ts($ts("#sampleinfo").any.tHead.getElementsByTagName("th")).Select(function(c){return c.innerText}).ToArray(!1):this.tableTitles=a();$ts(this.trs).ForEach(function(a){return a.onmousedown=function(){c.RowClick(a,!1);c.editMode=!0}});this.registerContextMenu()};d.prototype.displayMenu=function(a){var c=window.document.querySelector(".menu");if(this.editMode){var b=a.clientY,e=this.hasRowSelected;
c.style.left=a.clientX+"px";c.style.top=b+"px";c.style.display="block";$ts("#add-group").interactive(e);$ts("#add-batch").interactive(e);$ts("#add-sample1").interactive(e);$ts("#add-sample2").interactive(e);a.preventDefault();return!0}return!1};d.prototype.registerContextMenu=function(){var a=this,c=!1,f=window.document.querySelector(".menu"),e=this;window.addEventListener("contextmenu",function(b){return c=a.displayMenu(b)},!1);window.addEventListener("click",function(){1==c&&(f.style.display="none")},
!0);$ts("#add-group").onclick=function(){e.buildSampleInfo("#"+b.sampleInfoId)};$ts("#add-batch").onclick=function(){e.buildSampleInfo("#"+b.batchInfoId)};$ts("#add-sample1").onclick=function(){e.buildSampleInfo("#"+b.sample1Id)};$ts("#add-sample2").onclick=function(){e.buildSampleInfo("#"+b.sample2Id)};$ts("#exit-edit-mode").onclick=function(){e.exitEditMode()}};d.prototype.exitEditMode=function(){for(var a=0;a<this.trs.length;a++)this.trs.item(a).classList.remove("selected");this.editMode=!1};d.prototype.buildSampleInfo=
function(a){var c=$ts.select(".selected"),f=this;$(a).modal();$input("#sample-"+b.sampleInfoId).value=null;$input("#sample-"+b.batchInfoId).value=null;$input("#sample-"+b.sample1Id).value=null;$input("#sample-"+b.sample2Id).value=null;$ts.select(".group_checked").ForEach(function(a){return a.onclick=f.hookDataUpdates(c,a.getAttribute("field"))})};d.prototype.hookDataUpdates=function(a,c){var f=this;return function(){var e=$ts.value("#sample-"+b.sampleInfoId),g=$ts.value("#sample-"+b.batchInfoId),
d=$ts.value("#sample-"+b.sample1Id),k=$ts.value("#sample-"+b.sample2Id);if(c==b.sampleInfoId){var h=f.tableTitles.indexOf("sample_info");g=$jscomp.makeIterator(a.ToArray(!1));for(var l=g.next();!l.done;l=g.next())l.value.getElementsByTagName("td").item(h).innerText=e}else if(c==b.sample1Id)for(h=f.tableTitles.indexOf("sample_info1"),e=$jscomp.makeIterator(a.ToArray(!1)),l=e.next();!l.done;l=e.next())l.value.getElementsByTagName("td").item(h).innerText=d;else if(c==b.sample2Id)for(h=f.tableTitles.indexOf("sample_info2"),
e=$jscomp.makeIterator(a.ToArray(!1)),l=e.next();!l.done;l=e.next())l.value.getElementsByTagName("td").item(h).innerText=k;else if(c==b.batchInfoId){h=f.tableTitles.indexOf("batch");if(!Strings.Empty(g,!0)&&!Strings.isIntegerPattern(g))return alert("\u6279\u6b21\u7f16\u53f7\u5e94\u8be5\u662f\u4e00\u4e2a\u4efb\u610f\u6574\u578b\u6570\u5b57\u7b26\u4e32\uff01");e=$jscomp.makeIterator(a.ToArray(!1));for(l=e.next();!l.done;l=e.next())l.value.getElementsByTagName("td").item(h).innerText=g}else console.warn("invalid tag string: "+
c+"!");f.exitEditMode()}};d.prototype.RowClick=function(a,c){window.event.ctrlKey&&this.toggleRow(a);0===window.event.button&&(window.event.ctrlKey||window.event.shiftKey||(this.clearAll(),this.toggleRow(a)),window.event.shiftKey&&this.selectRowsBetweenIndexes([this.lastSelectedRow.rowIndex,a.rowIndex]))};d.prototype.toggleRow=function(a){a.classList.contains("selected")?a.classList.remove("selected"):a.classList.add("selected");this.lastSelectedRow=a};d.prototype.selectRowsBetweenIndexes=function(a){a.sort(function(c,
a){return c-a});for(var c=a[0]-1;c<a[1];c++){var b=this.trs[c];isNullOrUndefined(b)||b.classList.add("selected")}};d.prototype.clearAll=function(){for(var a=0;a<this.trs.length;a++)this.trs[a].classList.remove("selected")};d.createSampleInfotable=function(a){return $ts.evalHTML.table(a,null,{id:"sampleinfo",class:["sampleinfo","table"]})};d.createContextMenu=function(){var a=$ts("<div>",{id:"context",class:"menu"});a.hide();a.appendElement($ts("<div>",{class:"menu-item",id:"add-group"}).display("\u6279\u91cf\u7f16\u8f91\u6837\u672c\u5206\u7ec4"));
a.appendElement($ts("<div>",{class:"menu-item",id:"add-batch"}).display("\u6279\u91cf\u7f16\u8f91\u5b9e\u9a8c\u6279\u6b21"));a.appendElement($ts("<div>",{class:"menu-item",id:"add-sample1"}).display("\u7f16\u8f91\u4e9a\u578b\u5206\u7c7bA"));a.appendElement($ts("<div>",{class:"menu-item",id:"add-sample2"}).display("\u7f16\u8f91\u4e9a\u578b\u5206\u7c7bB"));a.appendElement($ts("<hr>",{style:"margin-top: 5px; margin-bottom: 5px;"}));a.appendElement($ts("<div>",{class:"menu-item",id:"exit-edit-mode"}).display("\u9000\u51fa\u7f16\u8f91\u6a21\u5f0f"));
return a};$jscomp.global.Object.defineProperties(d.prototype,{model:{configurable:!0,enumerable:!0,get:function(){var a=this;return $ts(this.trs).Select(function(c){var b={};c=c.getElementsByTagName("td");for(var e=$jscomp.makeIterator(a.tableTitles),g=e.next();!g.done;g=e.next())g=g.value,Strings.Empty(g,!0)||(b[g]=c.item(a.tableTitles.indexOf(g)).innerText);return b}).ToArray(!1)}},csv:{configurable:!0,enumerable:!0,get:function(){return b.as_tabular(this.model)}},hasRowSelected:{configurable:!0,
enumerable:!0,get:function(){for(var a=0;a<this.trs.length;a++)if(this.trs[a].classList.contains("selected"))return!0;return!1}}});b.sampleInfoUI=d})(biodeep||(biodeep={}));
(function(b){b.createInputModal=function(b,a,c){a=$ts("<div>",{class:"modal-dialog",role:"document"}).display($ts("<div>",{class:"modal-content"}).display('       \n            <div class="modal-header">  \n                <button type="button" class="close" data-dismiss="modal" aria-label="Close">  \n                    <span aria-hidden="true">\u00d7</span>  \n                </button>  \n                <h4 class="modal-title" id="myModalLabel">'+a+'</h4>  \n            </div>  \n            <div class="modal-body">\n                <p><input id="sample-'+
b+'" type="text" class="form-control" placeholder="'+c+'"></input></p>  \n            </div>  \n            <div class="modal-footer">  \n                <button type="button" class="btn btn-default" data-dismiss="modal">\u53d6\u6d88</button>  \n                <button field="'+b+'" type="button" class="group_checked btn btn-primary" data-dismiss="modal">\u786e\u5b9a</button>  \n            </div>'));b=$ts("<div>",{class:["modal","fade"],id:b,tabindex:-1,role:"dialog","aria-labelledby":"myModalLabel"}).display(a);
$ts("&body").appendElement(b)}})(biodeep||(biodeep={}));var uikit;
(function(b){(function(b){b.fromData=function(a,c,f,e){e=void 0===e?b.defaultConfig():e;var g=!isNullOrEmpty(f),d=g?f:Object.keys(a[0]);c=new b.tableEditor(c,d,e);e=e.allowsAddNew;c.opts.allowsAddNew=!0;a=$jscomp.makeIterator(a);for(d=a.next();!d.done;d=a.next()){var k=d.value;if(g){d={};for(var h=$jscomp.makeIterator(f),l=h.next();!l.done;l=h.next())l=l.value,d[l]=k[l];k=d}c.edit_lock=!1;c.addNew(k,!0).confirmNew()}c.opts.allowsAddNew=e;return c}})(b.table_editor||(b.table_editor={}))})(uikit||(uikit=
{}));
(function(b){(function(b){var a=function(c,a,e){this.tr=c;this.tbody=a;this.table=e;this.dropFlag=!1;var f=this;c=e.opts.names||b.defaultButtonNames();c=b.template.editor_template.replace("{1}",c.OK).replace(/\{2\}/g,c.cancel).replace("{3}",c.remove).replace("{4}",c.edit).replace("{5}",c.OK);this.editorActiontd=c=$ts("<td>").display(c);this.tr.appendChild(c);this.divs=c.getElementsByTagName("div");this.getElementById("confirm").onclick=function(){f.confirmNew()};this.getElementById("cancel").onclick=function(){f.cancelAddNew()};
this.getElementById("remove").onclick=function(){f.removeCurrent()};this.getElementById("edit").onclick=function(){f.editThis()};this.getElementById("ok").onclick=function(){f.confirmEdit()};this.getElementById("cancel-edit").onclick=function(){f.confirmEdit(!1)}};a.prototype.getElementById=function(c){c=c.toLowerCase();for(var b=0;b<this.divs.length;b++){var a=this.divs[b];if(a.id.toLowerCase()==c)return a;a=a.getElementsByTagName("a");for(var d=0;d<a.length;d++){var m=a[d];if(m.id.toLowerCase()==
c)return m}}return null};a.prototype.show=function(c){this.getElementById(c).style.display="block"};a.prototype.hide=function(c){this.getElementById(c).style.display="none"};a.prototype.hideInputs=function(c){c=void 0===c?!0:c;for(var b=this.tr.getElementsByTagName("td"),a=this.table.opts.tdConfig,d=0;d<b.length-1;d++)if(!(!isNullOrEmpty(a)&&a.length>d&&a[d].lockEditor)){var m=b[d],k=m.getElementsByTagName("div")[0];m=m.getElementsByTagName("input")[0];var h=a[d];k&&m&&(c&&(isNullOrUndefined(h)||
isNullOrUndefined(h.asUrl)?k.innerText=m.value:k.innerHTML=h.asUrl(m.value)),k.style.display="block",m.style.display="none")}};a.prototype.showInputs=function(){for(var c=this.tr.getElementsByTagName("td"),b=this.table.opts.tdConfig,a=0;a<c.length-1;a++)if(!(!isNullOrEmpty(b)&&b.length>a&&b[a].lockEditor)){var d=c[a],m=d.getElementsByTagName("div")[0];d=d.getElementsByTagName("input")[0];m&&d&&(d.value=m.innerText,d.style.display="block",m.style.display="none")}};a.prototype.confirmNew=function(){this.hide("row-new-pending");
this.show("remove-button");this.hideInputs();this.table.edit_lock=!1};a.prototype.cancelAddNew=function(){this.tr.remove();this.table.edit_lock=!1};a.prototype.onDelete=function(c){this._onremoves=c};a.prototype.removeCurrent=function(){isNullOrUndefined(this.table.opts.deleteRow)?(this.dropFlag=!0,this.tr.remove()):this.table.opts.deleteRow(this.tr,this);isNullOrUndefined(this._onremoves)||this._onremoves(this.tr)};a.prototype.editThis=function(){this.showInputs();this.hide("remove-button");this.show("edit-button");
this.table.edit_lock=!0};a.prototype.confirmEdit=function(c){this.hideInputs(void 0===c?!0:c);this.show("remove-button");this.hide("edit-button");this.table.edit_lock=!1};b.editor=a})(b.table_editor||(b.table_editor={}))})(uikit||(uikit={}));
(function(b){(function(b){function a(){return{remove:"Remove",edit:"Edit",OK:"Okey",cancel:"Cancel",actions:"Actions"}}b.defaultButtonNames=a;b.defaultConfig=function(){return{style:null,className:"table",tdConfig:null,warning:DoNothing,showRowNumber:!1,allowsAddNew:!0,names:a(),clearContainer:!0}};b.contains=function(c,b){return isNullOrUndefined(c.tdConfig)||c.tdConfig.length<=b}})(b.table_editor||(b.table_editor={}))})(uikit||(uikit={}));
(function(b){(function(b){var a=function(c,a,e){e=void 0===e?b.defaultConfig():e;this.headers=a;this.opts=e;isNullOrUndefined(e.showRowNumber)&&(e.showRowNumber=!1);e.showRowNumber?(this.headers=["NO."].concat(a),this.fieldHeaders=[null].concat(a)):this.fieldHeaders=[].concat($jscomp.arrayFromIterable(a));isNullOrUndefined(e.allowsAddNew)&&TypeScript.logging.warning("editor config option [allowsAddNew] is missing, set to "+(e.allowsAddNew=!0)+" by default!");this.rows=[];var d=$ts("<thead>"),f=$ts("<tbody>"),
k=$ts("<table>",{id:Strings.Empty(e.table_id,!0)?c.replace(/[#]+/g,"")+"-table":e.table_id,class:["table"]}).appendElement(d).appendElement(f);!isNullOrUndefined(e.clearContainer)&&e.clearContainer?$ts(c).clear().appendElement(k):$ts(c).appendElement(k);Strings.Empty(e.style,!0)||k.setAttribute("style",e.style);Strings.Empty(e.className,!0)||(k.className=e.className);c=$ts("<tr>");d.appendChild(c);c=a;c=isNullOrUndefined(e.names)||Strings.Empty(e.names.actions,!0)?c.concat(["actions"]):a.concat([e.names.actions]);
for(a=0;a<c.length;a++){var h=c[a];var l=a;h=$ts("<th>").display(h);l=b.contains(e,l)?{lockEditor:!1}:e.tdConfig[l];d.appendChild(h);Strings.Empty(l.width)||h.setAttribute("style",l.width);Strings.Empty(l.title)||h.display(l.title);l=h;a==c.length-1&&(l.style.minWidth="155px")}this.table=k;this.tbody=f};a.prototype.addNew=function(c,a){c=void 0===c?null:c;a=void 0===a?!1:a;if(this.edit_lock||!this.opts.allowsAddNew)return isNullOrUndefined(this.opts.warning)||this.opts.warning(),null;c=this.addNewInternal(c,
a);this.rows.push(c);return c};a.prototype.addNewInternal=function(c,a){var d=this.rows.length+1,f=this.opts.showRowNumber,m=$ts("<tr>",{id:"row-"+d}),k,h=0,l=$jscomp.makeIterator(this.headers);for(k=l.next();!k.done;k=l.next())k=k.value,f?(f=!1,k=$ts("<td>").display(d.toString())):k=this.propertyValue(c,k,a,this.opts.tdConfig[h++]),m.appendChild(k);this.tbody.appendChild(m);this.edit_lock=!0;return new b.editor(m,this.tbody,this)};a.prototype.propertyValue=function(c,a,b,d){var e=$ts("<td>"),f=$ts("<div>",
{id:"text",style:"display: "+(b?"block":"none")});b=$ts("<input>",{type:"text",style:"width: 85%; display: "+(b?"none":"block"),class:["form-control","input-"+a]});isNullOrUndefined(c)||(c=c[a],isNullOrUndefined(c)&&(c=""),f.display(c),$input(b).value=c);e.appendChild(b);e.appendChild(f);isNullOrUndefined(d)||isNullOrUndefined(d.lockEditor)||!d.lockEditor||(b.hide(),f.show());return e};a.prototype.TableData=function(c){c=void 0===c?!0:c;for(var a=[],b=this.tbody.getElementsByTagName("tr"),d=0;d<b.length;d++)a.push(this.createObject(b[d],
c));return a};a.prototype.TableRows=function(){return[].concat($jscomp.arrayFromIterable(this.rows))};a.prototype.createObject=function(a,b){a=a.getElementsByTagName("td");for(var c={},d=this.opts.showRowNumber,f=0;f<a.length-1;f++){var k=a[f],h=k.getElementsByTagName("div")[0];if(d&&(d=!1,!b))continue;c[this.headers[f]]=h?h.innerText:k.innerText}return c};$jscomp.global.Object.defineProperties(a.prototype,{keyIndex:{configurable:!0,enumerable:!0,get:function(){return $from(this.rows).Select(function(a){return parseInt(a.tr.cells.item(0).innerText)}).Max()}},
nrows:{configurable:!0,enumerable:!0,get:function(){var a=this.tbody.getElementsByTagName("tr");return isNullOrUndefined(a)?0:a.length}}});b.tableEditor=a})(b.table_editor||(b.table_editor={}))})(uikit||(uikit={}));
(function(b){b=b.table_editor||(b.table_editor={});(b.template||(b.template={})).editor_template='\n        <div id="row-new-pending">\n            <span class="label label-success"><a href="'+executeJavaScript+'" id="confirm">{1}</a></span>&nbsp;\n            <span class="label label-warning"><a href="'+executeJavaScript+'" id="cancel">{2}</a></span>\n        </div>\n        <div id="remove-button" style="display:none;">            \n            <span class="label label-warning"><a href="'+executeJavaScript+
'" id="remove">{3}</a></span>            \n            <span class="label label-info"><a href="'+executeJavaScript+'" id="edit">{4}</a></span>          \n        </div>\n        <div id="edit-button" style="display:none;">            \n            <span class="label label-success"><a href="'+executeJavaScript+'" id="ok">{5}</a></span>\n            <span class="label label-warning"><a href="'+executeJavaScript+'" id="cancel-edit">{2}</a></span>\n        </div>'})(uikit||(uikit={}));
